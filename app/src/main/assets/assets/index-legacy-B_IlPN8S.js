!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */o=function(){return r};var t,r={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var a=t&&t.prototype instanceof y?t:y,o=Object.create(a.prototype),s=new C(n||[]);return i(o,"_invoke",{value:A(e,r,s)}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h="suspendedStart",v="suspendedYield",m="executing",g="completed",w={};function y(){}function b(){}function k(){}var S={};f(S,u,(function(){return this}));var x=Object.getPrototypeOf,D=x&&x(x(I([])));D&&D!==n&&a.call(D,u)&&(S=D);var P=k.prototype=y.prototype=Object.create(S);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(t,r){function n(o,i,s,u){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==e(f)&&a.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,s,u)}),(function(e){n("throw",e,s,u)})):r.resolve(f).then((function(e){l.value=e,s(l)}),(function(e){return n("throw",e,s,u)}))}u(c.arg)}var o;i(this,"_invoke",{value:function(e,t){function a(){return new r((function(r,a){n(e,t,r,a)}))}return o=o?o.then(a,a):a()}})}function A(e,r,n){var a=h;return function(o,i){if(a===m)throw Error("Generator is already running");if(a===g){if("throw"===o)throw i;return{value:t,done:!0}}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var u=L(s,n);if(u){if(u===w)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===h)throw a=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=m;var c=d(e,r,n);if("normal"===c.type){if(a=n.done?g:v,c.arg===w)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=g,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,a=e.iterator[n];if(a===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var o=d(a,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,w;var i=o.arg;return i?i.done?(r[e.resultName]=i.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,w):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function I(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var o=-1,i=function e(){for(;++o<r.length;)if(a.call(r,o))return e.value=r[o],e.done=!1,e;return e.value=t,e.done=!0,e};return i.next=i}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=k,i(P,"constructor",{value:k,configurable:!0}),i(k,"constructor",{value:b,configurable:!0}),b.displayName=f(k,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,l,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},E(T.prototype),f(T.prototype,c,(function(){return this})),r.AsyncIterator=T,r.async=function(e,t,n,a,o){void 0===o&&(o=Promise);var i=new T(p(e,t,n,a),o);return r.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(P),f(P,l,"Generator"),f(P,u,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=I,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,a){return s.type="throw",s.arg=e,r.next=n,a&&(r.method="next",r.arg=t),!!a}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),c=a.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=t,o?(this.method="next",this.next=o.finallyLoc,w):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;N(r)}return a}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),w}},r}function i(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function s(e){i(o,n,a,s,u,"next",e)}function u(e){i(o,n,a,s,u,"throw",e)}s(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,r||"default");if("object"!=e(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function h(e,t){if(e){if("string"==typeof e)return v(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./@vue-legacy-DKT3hqtJ.js","./element-plus-legacy-h_V_eBA9.js","./vendor-legacy-JkP7VFYq.js","./cos-js-sdk-v5-legacy-BMAW7OD5.js","./ali-oss-legacy-DIPzk0O8.js","./@element-plus-legacy-bi5OEa8d.js"],(function(e,n){"use strict";var i,c,p,h,v,m,g,w,y,b,k,S,x,D,P,E,T,A,L,O,N,C,I,F,M,R,j,_,B,G,U,K,J,z,Y,V,W,H,X,Z,$,Q,q,ee,te,re,ne,ae,oe;return{setters:[function(e){i=e.t,c=e.W,p=e.d,h=e.o,v=e.E,m=e.F,g=e.O,w=e.K,y=e.a,b=e.u,k=e.v,S=e.at,x=e.au,D=e.S,P=e.p,E=e.c,T=e.M,A=e.J,L=e._,O=e.a6,N=e.n,C=e.G,I=e.ac,F=e.al},function(e){M=e.E,R=e.a,j=e.b,_=e.c,B=e.d,G=e.e,U=e.f,K=e.g,J=e.h,z=e.i,Y=e.j,V=e.v,W=e.z},function(e){H=e.L,X=e.M,Z=e.N,$=e.O,Q=e.P,q=e.Q,ee=e.R,te=e.U,re=e.p,ne=e.V},function(e){ae=e.C},function(e){oe=e.O},null],execute:function(){var ie=document.createElement("style");ie.textContent=".icon-verify[data-v-a27813a2],.icon-verify[data-v-5267c5a6]{font-size:110%;color:#409eff;margin-right:5px}body,html{padding:0;margin:0}.back-img{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:-2}#password-app{height:100vh}@font-face{font-family:iconfont;src:url("+new URL("iconfont-sCrWamCl.woff2?t=1720790383207",n.meta.url).href+') format("woff2"),url('+new URL("iconfont-IwnF_JHD.woff?t=1720790383207",n.meta.url).href+') format("woff"),url('+new URL("iconfont-bOWqBw0K.ttf?t=1720790383207",n.meta.url).href+') format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-money:before{content:""}.icon-praise:before{content:""}.icon-company:before{content:""}.icon-idea:before{content:""}.icon-report:before{content:""}.icon-coffee:before{content:""}.icon-check-mark:before{content:""}.icon-pc:before{content:""}.icon-personalization:before{content:""}.icon-copyright:before{content:""}.icon-display:before{content:""}.icon-function:before{content:""}.icon-about:before{content:""}.icon-problem:before{content:""}.icon-diannao:before{content:""}.icon-create:before{content:""}.icon-open-file:before{content:""}.icon-recycle-bin:before{content:""}.icon-risk:before{content:""}.icon-show-password:before{content:""}.icon-recovery:before{content:""}.icon-merge:before{content:""}.icon-cover:before{content:""}.icon-danger:before{content:""}.icon-verify:before{content:""}.icon-recycle-bin-copy:before{content:""}.icon-logo:before{content:""}.icon-list:before{content:""}.icon-card:before{content:""}.icon-filtration:before{content:""}.icon-favorited:before{content:""}.icon-back:before{content:""}.icon-dice:before{content:""}.icon-refresh:before{content:""}.icon-peer-directory:before{content:""}.icon-sub-directory:before{content:""}.icon-info:before{content:""}.icon-menu:before{content:""}.icon-exit:before{content:""}.icon-import:before{content:""}.icon-export:before{content:""}.icon-collect:before{content:""}.icon-download:before{content:""}.icon-setting:before{content:""}.icon-copy:before{content:""}.icon-empty:before{content:""}.icon-lock-close:before{content:""}.icon-dark-mode:before{content:""}.icon-right-mode:before{content:""}.icon-more:before{content:""}.icon-show:before{content:""}.icon-label:before{content:""}.icon-edit:before{content:""}.icon-delete:before{content:""}.icon-lock:before{content:""}.icon-hide:before{content:""}.icon-search:before{content:""}.icon-share:before{content:""}.icon-unlock:before{content:""}\n',document.head.appendChild(ie),e({A:_e,k:Ie});var se=e("q",(function(){var e="";try{e+=(Intl.DateTimeFormat().resolvedOptions().timeZone||"")+","}catch(n){}try{e+=(window.navigator.languages.join(",")||"")+",",e+=(window.navigator.hardwareConcurrency||"")+","}catch(n){}try{e+=(window.getComputedStyle(document.documentElement).fontFamily||"")+","}catch(n){}try{var t=document.createElement("canvas").getContext("webgl2");if(t){var r=t.getExtension("WEBGL_debug_renderer_info");r&&(e+=(t.getParameter(r.UNMASKED_RENDERER_WEBGL)||"")+",")}}catch(n){}return H.MD5(e).toString()})),ue=e("o",(function(e,t){var r=H.enc.Utf8.parse(t),n=H.enc.Utf8.parse(H.MD5(e).toString()),a=H.enc.Utf8.parse(H.MD5("password-xl").toString());return H.AES.encrypt(r,n,{iv:a,mode:H.mode.CBC,padding:H.pad.Pkcs7}).ciphertext.toString()})),ce=e("t",(function(e,t){try{return!!le(e,t)}catch(r){return!1}})),le=e("v",(function(e,t){var r=H.enc.Hex.parse(t),n=H.enc.Base64.stringify(r),a=H.enc.Utf8.parse(H.MD5(e).toString()),o=H.enc.Utf8.parse(H.MD5("password-xl").toString());return H.AES.decrypt(n,a,{iv:o,mode:H.mode.CBC,padding:H.pad.Pkcs7}).toString(H.enc.Utf8).toString()})),fe=function(e){return H.MD5(e).toString()},pe=e("n",function(e){return e.ASC="ascending",e.DESC="descending",e}(pe||{})),de=e("e",function(e){return e[e.NORMAL=0]="NORMAL",e[e.DELETED=1]="DELETED",e}(de||{})),he=e("T",function(e){return e.AUTO="auto",e.LIGHT="light",e.DARK="dark",e}(he||{})),ve=e("P",function(e){return e[e.CARD=0]="CARD",e[e.TABLE=1]="TABLE",e}(ve||{})),me=e("S",function(e){return e.NO_LOGIN="初始化",e.LOGGED="已登录",e.WAIT_INIT="待初始化",e.UNLOCKED="已解锁",e}(me||{})),ge=e("M",function(e){return e.STANDARD="standard",e.GESTURE="gesture",e}(ge||{})),we=function(e){for(var t={},r=[],n=0,a=0;a<e.length;a++){var o=[];for(var i in e[a])t.hasOwnProperty(i)||(t[i]=n++),o[t[i]]=e[a][i];r.push(o)}return{keys:t,dataArray:r}},ye=e("w",(function(e){for(var t=[],r=0;r<e.dataArray.length;r++){var n=e.dataArray[r],a={};for(var o in e.keys){var i=n[e.keys[o]];void 0!==i&&(a[o]=i)}t.push(a)}return t})),be=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"password-xl/store.json",setting:"password-xl/setting.json"}),f(this,"fileEtags",{}),f(this,"cosClient",null),f(this,"region",""),f(this,"bucket","")}),[{key:"login",value:(m=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.cosClient=new ae({SecretId:t.secretId,SecretKey:t.secretKey}),this.region=t.region,this.bucket=t.bucket,e.abrupt("return",Promise.resolve({status:!0}));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getStoreData",value:(v=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"setStoreData",value:(h=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(i=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getFile",value:(a=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!r.cosClient)throw new Error("cos getFile 存储引擎不存在");r.cosClient.getObject({Bucket:r.bucket,Region:r.region,Key:t},(function(a,o){if(o)return r.updateEtag(t,o.ETag),void e(JSON.parse(o.Body.toString()));a&&404===a.statusCode?e(""):(M.error({title:"系统异常",message:r.errorDispose(a)}),n({status:!1,message:r.errorDispose(a)}))}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"uploadFile",value:(n=s(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.cosClient){e.next=2;break}throw new Error("cos uploadFile 存储引擎不存在");case 2:return e.next=4,n.checkEtag(t);case 4:if(e.sent){e.next=8;break}return R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){location.reload()}}),e.abrupt("return");case 8:n.cosClient.putObject({Bucket:n.bucket,Region:n.region,Key:t,Body:JSON.stringify(r)},(function(e,r){e?(M.error({title:"系统异常",message:n.errorDispose(e)}),i({status:!1,message:n.errorDispose(e)})):(n.updateEtag(t,r.ETag),a({status:!0}))}));case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!r.cosClient)throw new Error("cos deleteFile 存储引擎不存在");r.cosClient.deleteObject({Bucket:r.bucket,Region:r.region,Key:t},(function(t){t?(M.error({title:"系统异常",message:r.errorDispose(t)}),n({status:!1,message:r.errorDispose(t)})):e({status:!0})}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(e){if("InvalidAccessKeyId"===e.code)return"账户（secretId）无效";if("SignatureDoesNotMatch"===e.code)return"密钥（secretKey）无效";if("Error"===e.code){var t={"CORS blocked or network error":"有可能是存储桶（bucket）不存在、地域（region）错误、跨域配置错误","Access Denied.":"该账号无存储桶（bucket）权限或存储桶错误",'Bucket should format as "test-1250000000".':"存储桶（bucket）格式错误"}[e.message];return t||e.message}}return"COS登录异常-未知原因"}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=s(o().mark((function r(n){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.cosClient){r.next=2;break}throw new Error("cos getEtag 存储引擎不存在");case 2:t.cosClient.headObject({Bucket:t.bucket,Region:t.region,Key:e},(function(e,t){n(t.ETag)}));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fileEtags[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,c,p,d,h,v,m}();e("H",be);var ke=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"password-xl/store.json",setting:"password-xl/setting.json"}),f(this,"fileEtags",{}),f(this,"ossClient",null)}),[{key:"login",value:(m=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.ossClient=new oe({region:t.region,accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,bucket:t.bucket}),e.abrupt("return",Promise.resolve({status:!0}));case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",Promise.reject({status:!1,message:e.t0}));case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return m.apply(this,arguments)})},{key:"getStoreData",value:(v=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"setStoreData",value:(h=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(i=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getFile",value:(a=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!r.ossClient)throw new Error("oss getFile 存储引擎不存在");r.ossClient.get(t).then((function(n){r.updateEtag(t,JSON.parse(JSON.stringify(n.res.headers))["last-modified"]),e(n.content.toString())})).catch((function(t){t&&404===t.status?e(""):(M.error({title:"系统异常",message:r.errorDispose(t)}),n({status:!1,message:r.errorDispose(t)}))}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"uploadFile",value:(n=s(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(a,i){var u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ossClient){e.next=2;break}throw new Error("oss uploadFile 存储引擎不存在");case 2:return e.next=4,n.checkEtag(t);case 4:if(e.sent){e.next=8;break}return R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){location.reload()}}),e.abrupt("return");case 8:u=X.Buffer.from(r),n.ossClient.put(t,u).then(s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateEtag(t);case 2:a({status:!0});case 3:case"end":return e.stop()}}),e)})))).catch((function(e){M.error({title:"系统异常",message:n.errorDispose(e)}),i({status:!1,message:n.errorDispose(e)})}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){if(!r.ossClient)throw new Error("oss deleteFile 存储引擎不存在");r.ossClient.delete(t).then((function(){e({status:!0})})).catch((function(e){M.error({title:"系统异常",message:r.errorDispose(e)}),n({status:!1,message:r.errorDispose(e)})}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(-1===e.status)return"有可能是存储桶（bucket）不存在、地域（region）错误、跨域配置错误";if(403===e.status){var t={InvalidAccessKeyId:"账号（AccessKeyId）无效",SignatureDoesNotMatch:"密钥（secretKey）无效",AccessDenied:"该账号无存储桶（bucket）权限或存储桶错误"}[e.code];return t||"权限错误"}return e.message}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=s(o().mark((function r(n){var a,i;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.ossClient){r.next=2;break}throw new Error("oss getEtag 存储引擎不存在");case 2:return r.next=4,t.ossClient.head(e);case 4:a=r.sent,i=JSON.parse(JSON.stringify(a.res.headers))["last-modified"],n(i);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.next=3,this.getEtag(t);case 3:r=e.sent;case 4:this.fileEtags[t]=r;case 5:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,c,p,d,h,v,m}();e("I",ke);var Se=e("b",Z("settingStore",{state:function(){return{setting:{autoGeneratePassword:!0,customFields:[],easyConfuseChat:"0OoIil",showLabelCard:!0,showFavoriteCard:!0,enableRecycleBin:!1,enableShortcutKey:!0,generateRule:{length:16,lowercase:!0,number:!0,symbol:!0,uppercase:!0},showTimeForTable:"no",showLabelForTable:!0,showStrength:!0,sortOrder:pe.DESC,sortField:"addTime",timeoutLock:0,verifyShowGesture:!0,passwordDisplayMode:ve.TABLE,autoLogin:!0,autoUnlock:!1,showPasswordStatistics:!1,bgColors:["rgb(255,0,0)","rgb(255,136,0)","rgb(115,255,0)","rgb(0,208,255)","rgb(95,0,255)","rgb(178,0,255)","rgb(0,0,0)"],dynamicBackground:!0,passwordColor:!1}}}})),xe=e("a",Z("refStore",{state:function(){return{verifyPasswordRef:i(),passwordFormRef:i(),cancelAccountRef:i(),settingRef:i(),labelTreeRef:i(),labelTreeDivRef:i(),setPasswordRef:i(),recycleBinRef:i(),backupAndRecoveryRef:i(),fastLoginRef:i(),labelDrawer:i(),favoriteDrawer:i(),tourRef:i(),showPasswordRef:i(),exportExcelRef:i(),importExcelRef:i(),contextmenuRef:i(),createPasswordBtnRef:i(),passwordFormFormRef:i(),passwordFormTitleRef:i(),passwordFormGenerateBtnRef:i(),passwordFormGenerateRuleRef:i(),passwordFormSaveBtnRef:i(),displayModeCardRef:i(),displayModeTableRef:i(),searchInputRef:i()}}})),De=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"}),f(this,"fileEtags",{}),f(this,"serverUrl",""),f(this,"token","")}),[{key:"login",value:(m=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serverUrl=t.serverUrl,e.abrupt("return",new Promise((function(e){$.post(r.serverUrl+"/login",{username:t.username,password:t.password}).then((function(t){200===t.status?200===t.data.code?(r.token=t.data.data,e({status:!0})):e({status:!1,message:t.data.message}):e({status:!1,message:t.statusText})})).catch((function(t){e({status:!1,message:r.errorDispose(t.message)})}))})));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return m.apply(this,arguments)})},{key:"getStoreData",value:(v=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return v.apply(this,arguments)})},{key:"setStoreData",value:(h=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(i=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"getFile",value:(a=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){$.post(r.serverUrl+"/get",{key:t},{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(a){return 500===a.data.code?(M.error({title:"系统异常",message:r.errorDispose(a.data.message)}),void n({status:!1,message:a.data.message})):404!==a.data.code?200===a.status?(r.updateEtag(t,a.data.data.etag),void e(a.data.data.content)):void n({status:!1,message:a.statusText}):void e("")})).catch((function(e){M.error({title:"系统异常",message:e.message}),n({status:!1,message:e})}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"uploadFile",value:(n=s(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(a,i){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.checkEtag(t);case 2:if(e.sent){e.next=6;break}return R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){location.reload()}}),e.abrupt("return");case 6:$.post(n.serverUrl+"/put",{key:t,content:r},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){return 500===e.data.code?(M.error({title:"系统异常",message:n.errorDispose(e.data.message)}),void i({status:!1,message:e.data.message})):200===e.status?(n.updateEtag(t,e.data.data.etag),void a({status:!0})):void i({status:!1,message:e.statusText})})).catch((function(e){M.error({title:"系统异常",message:e.message}),i({status:!1,message:e})}));case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){$.post(r.serverUrl+"/delete",{key:t},{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(t){if(500===t.data.code)return M.error({title:"系统异常",message:r.errorDispose(t.data.message)}),void n({status:!1,message:t.data.message});200!==t.status?n({status:!1,message:t.statusText}):e({status:!0})})).catch((function(e){n({status:!1,message:e})}))})));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(-1!==e.indexOf("Invalid URL"))return"无效的服务地址";return{"IORuntimeException: IOException: Permission denied":"服务端文件权限不足","Network Error":"无法连接到服务器"}[e]||e}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=s(o().mark((function r(n,a){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:$.post(t.serverUrl+"/getEtag",{key:e},{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(500===e.data.code)return M.error({title:"系统异常",message:t.errorDispose(e.data.message)}),void a({status:!1,message:e.data.message});200!==e.status?a({status:!1,message:e.statusText}):n(e.data.data.etag)})).catch((function(e){M.error({title:"系统异常",message:e.message}),a({status:!1,message:e})}));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=s(o().mark((function e(t){var r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fileEtags[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,c,p,d,h,v,m}();e("G",De);var Pe=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"})}),[{key:"login",value:(h=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({status:!0}));case 1:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getStoreData",value:(d=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"setStoreData",value:(p=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deleteStoreData",value:(c=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getSettingData",value:(i=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setSettingData",value:(a=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deleteSettingData",value:(n=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFile",value:(r=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.electronAPI.getFile(t);case 2:n=e.sent,r(n||"");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"uploadFile",value:(t=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.electronAPI.uploadFile(t,r),n({status:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"deleteFile",value:(e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.electronAPI.deleteFile(t),e({status:!0})})));case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,c,p,d,h}();e("J",Pe);var Ee=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"})}),[{key:"login",value:(h=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve({status:!0}));case 1:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getStoreData",value:(d=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"setStoreData",value:(p=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deleteStoreData",value:(c=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getSettingData",value:(i=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"setSettingData",value:(a=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"deleteSettingData",value:(n=s(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFile",value:(r=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.androidAPI.getFile(t);case 2:n=e.sent,r(n||"");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"uploadFile",value:(t=s(o().mark((function e(t,r){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(n){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.androidAPI.uploadFile(t,r),n({status:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"deleteFile",value:(e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){window.androidAPI.deleteFile(t),e({status:!0})})));case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e,t,r,n,a,i,c,p,d,h}();e("K",Ee);var Te,Ae=e("l",Z("loginStore",{state:function(){return{loginType:"",logging:!1,loginForm:null}},actions:{startLogin:(Te=s(o().mark((function e(t,r){var n=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(a){var i,s,u,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=null,"oss"!==t.loginType){e.next=5;break}i=new ke,e.next=23;break;case 5:if("cos"!==t.loginType){e.next=9;break}i=new be,e.next=23;break;case 9:if("private"!==t.loginType){e.next=13;break}i=new De,e.next=23;break;case 13:if("electron"!==t.loginType){e.next=17;break}i=new Pe,e.next=23;break;case 17:if("android"!==t.loginType){e.next=21;break}i=new Ee,e.next=23;break;case 21:return a(!1),e.abrupt("return");case 23:return n.loginType=t.loginType,(s=Oe()).loading("自动登录中..."),e.next=28,i.login(t);case 28:if(e.sent.status){e.next=33;break}return s.unloading(),a(!1),e.abrupt("return");case 33:return e.next=35,s.passwordManager.login(i).catch((function(){return a(!1)}));case 35:if((u=e.sent)&&u.status){e.next=40;break}return s.unloading(),a(!1),e.abrupt("return");case 40:s.serviceStatus===me.LOGGED?(c=s.passwordManager.unlock(r),s.unloading(),a(c)):s.serviceStatus===me.WAIT_INIT&&(s.unloading(),a(!0)),n.loginForm=t;case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e,t){return Te.apply(this,arguments)}),autoLogin:function(){var e=this;return new Promise(function(){var t=s(o().mark((function t(r){var n,a,i,s,u,c;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=localStorage.getItem("loginInfo")){t.next=5;break}return r(!1),t.abrupt("return");case 5:if(a=le(se(),n)){t.next=9;break}return r(!1),t.abrupt("return");case 9:return i=JSON.parse(a),t.next=12,e.getMainPassword(i);case 12:return s=t.sent,u=JSON.parse(le(s,i.loginForm)),t.next=16,e.startLogin(u,s);case 16:c=t.sent,r(c),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(0),r(!1);case 23:case"end":return t.stop()}}),t,null,[[0,20]])})));return function(e){return t.apply(this,arguments)}}())},getMainPassword:function(e){return s(o().mark((function t(){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=localStorage.getItem("mainPassword"))){t.next=5;break}if(n=le(se(),r),!ce(n,e.loginForm)){t.next=5;break}return t.abrupt("return",n);case 5:return t.next=7,xe().verifyPasswordRef.getAndVerify((function(t){return ce(t,e.loginForm)}),e.mainPasswordType);case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()},setAutoLoginInfo:function(e){var t=Se(),r=sessionStorage.getItem("loginForm");if(t.setting.autoLogin&&r){var n=le(se(),r),a={mainPasswordType:Oe().mainPasswordType,loginForm:ue(e,n)};localStorage.setItem("loginInfo",ue(se(),JSON.stringify(a))),sessionStorage.removeItem("loginForm")}if(t.setting.autoUnlock){var o=se();localStorage.setItem("mainPassword",ue(o,e))}},updateRememberLoginInfo:function(e,t){try{var r=localStorage.getItem("loginInfo");if(!r)return!1;var n=se(),a=le(n,r);if(!a)return!1;var o=JSON.parse(a),i=Oe().mainPasswordType;return o.mainPasswordType=i,o.loginForm=ue(t,le(e,o.loginForm)),localStorage.setItem("loginInfo",ue(n,JSON.stringify(o))),!0}catch(s){return!1}}}})),Le=function(){return l((function e(){var t=this;u(this,e),f(this,"databaseClient",null),f(this,"storeData",null),f(this,"passwordStore",Oe()),f(this,"loginStore",Ae()),f(this,"settingStore",Se()),f(this,"refStore",xe()),f(this,"serviceStatusAssert",(function(e){if(t.passwordStore.serviceStatus!==e)throw new Error("当前服务状态不允许该操作："+t.passwordStore.serviceStatus)}))}),[{key:"login",value:(n=s(o().mark((function e(t){var r=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(n,a){var i,s;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getStoreData();case 3:return i=e.sent,e.next=6,t.getSettingData();case 6:s=e.sent,i&&(r.storeData=JSON.parse(i),r.storeData&&r.storeData.mainPasswordType&&(r.passwordStore.mainPasswordType=r.storeData.mainPasswordType)),s&&Object.assign(r.settingStore.setting,JSON.parse(s)),r.databaseClient=t,r.passwordStore.passwordManager=r,r.storeData&&r.storeData.passwordData?(r.passwordStore.mainPasswordType=r.storeData.mainPasswordType,r.passwordStore.setServiceStatus(me.LOGGED)):r.passwordStore.setServiceStatus(me.WAIT_INIT),n({status:!0}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),a({status:!1,message:e.t0});case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"initMainPassword",value:(r=s(o().mark((function e(t,r){var n,a=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.serviceStatusAssert(me.WAIT_INIT),!this.passwordStore.mainPassword){e.next=3;break}throw new Error("密码已存在，不允许初始化");case 3:if(this.databaseClient){e.next=5;break}throw new Error("系统异常");case 5:return e.prev=5,this.passwordStore.mainPassword=r,this.storeData={passwordData:ue(r,JSON.stringify(we([]))),labelData:ue(r,JSON.stringify([])),mainPasswordType:t},e.next=10,this.databaseClient.setStoreData(JSON.stringify(this.storeData));case 10:if((n=e.sent)&&n.status){e.next=13;break}return e.abrupt("return",Promise.reject(n));case 13:return e.next=15,this.syncSetting();case 15:if(e.sent){e.next=18;break}return e.abrupt("return",Promise.reject({status:!1,message:"设置同步失败"}));case 18:return this.passwordStore.mainPasswordType=t,this.passwordStore.setServiceStatus(me.UNLOCKED),this.addDemoData(),e.next=23,this.syncStoreData();case 23:return c((function(){var e;null===(e=a.refStore.tourRef)||void 0===e||e.startTour()})),e.abrupt("return",Promise.resolve({status:!0}));case 27:return e.prev=27,e.t0=e.catch(5),e.abrupt("return",Promise.reject(e.t0));case 30:case"end":return e.stop()}}),e,this,[[5,27]])}))),function(e,t){return r.apply(this,arguments)})},{key:"addDemoData",value:function(){var e={id:Date.now(),pid:0,name:"网站",children:[]},t={id:Date.now(),title:"百度（示例数据）",address:"https://www.baidu.com",username:"18395708888",password:_e(this.settingStore.setting.generateRule),remark:"百度网盘、百度贴吧",addTime:Date.now(),updateTime:Date.now(),deleteTime:0,favoriteTime:0,favorite:!0,customFields:{},labels:[e.id],status:de.NORMAL,bgColor:""};this.passwordStore.labelArray.push(e),this.passwordStore.allPasswordArray.push(t)}},{key:"verifyPassword",value:function(e,t){try{return t?!!le(e,t):!!this.storeData&&!!le(e,this.storeData.passwordData)}catch(r){return!1}}},{key:"updateMainPassword",value:(t=s(o().mark((function e(t,r,n){var a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.databaseClient){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:if(this.serviceStatusAssert(me.UNLOCKED),this.verifyPassword(t)){e.next=6;break}return e.abrupt("return",Promise.reject({status:!1,message:"旧密码错误"}));case 6:return this.passwordStore.loading("密码修改中..."),a=JSON.stringify(this.storeData),this.storeData={passwordData:ue(n,JSON.stringify(we(this.passwordStore.allPasswordArray))),labelData:ue(n,JSON.stringify(this.passwordStore.labelArray)),mainPasswordType:r},e.next=11,this.databaseClient.setStoreData(JSON.stringify(this.storeData));case 11:if((i=e.sent)&&i.status){e.next=16;break}return this.storeData=JSON.parse(a),M.error({title:"系统异常",message:i.message}),e.abrupt("return",Promise.reject());case 16:return this.passwordStore.mainPasswordType=r,this.passwordStore.mainPassword=n,this.loginStore.updateRememberLoginInfo(t,n),this.passwordStore.unloading(),e.abrupt("return",Promise.resolve({status:!0}));case 21:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"addPassword",value:function(e){this.serviceStatusAssert(me.UNLOCKED);var t=a(a({},e),{},{id:Date.now(),addTime:Date.now(),updateTime:Date.now(),status:de.NORMAL});return this.passwordStore.allPasswordArray.unshift(t),this.syncStoreData()}},{key:"updatePassword",value:function(e){this.serviceStatusAssert(me.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e.id}));return-1!==t?(this.passwordStore.allPasswordArray[t]=e,this.syncStoreData()):Promise.reject("没有找到这个密码："+e.id)}},{key:"deletePassword",value:function(e){if(this.serviceStatusAssert(me.UNLOCKED),this.settingStore.setting.enableRecycleBin){var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t){if(this.passwordStore.allPasswordArray[t].status===de.DELETED)return this.completelyDeletePassword(e);var r=this.passwordStore.allPasswordArray[t];return r.deleteTime=Date.now(),r.status=de.DELETED,this.syncStoreData()}throw new Error("密码不存在")}return this.completelyDeletePassword(e)}},{key:"completelyDeletePassword",value:function(e){this.serviceStatusAssert(me.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t)return this.passwordStore.allPasswordArray.splice(t,1),this.syncStoreData();throw new Error("未找到指定ID的密码")}},{key:"cancelDeletePassword",value:function(e){this.serviceStatusAssert(me.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t){var r=this.passwordStore.allPasswordArray[t];return r.deleteTime=0,r.status=de.NORMAL,this.syncStoreData()}throw new Error("未找到指定ID的密码")}},{key:"unlock",value:function(e){if(this.serviceStatusAssert(me.LOGGED),!this.storeData)throw new Error("系统异常");try{if(!ce(e,this.storeData.passwordData))return j.error("解锁失败-密码错误"),!1;var t=le(e,this.storeData.passwordData),r=le(e,this.storeData.labelData);return t&&r?(this.passwordStore.allPasswordArray=ye(JSON.parse(t)),this.passwordStore.labelArray=JSON.parse(r),this.passwordStore.mainPassword=e,this.passwordStore.setServiceStatus(me.UNLOCKED),this.loginStore.setAutoLoginInfo(e),!0):(j.error("解锁失败-密码错误"),!1)}catch(n){return!1}}},{key:"lock",value:function(){this.passwordStore.mainPassword="",this.passwordStore.allPasswordArray=[],this.passwordStore.labelArray=[],this.passwordStore.setServiceStatus(me.LOGGED),localStorage.removeItem("mainPassword")}},{key:"emptyRecycle",value:function(){return this.passwordStore.allPasswordArray=this.passwordStore.allPasswordArray.filter((function(e){return e.status!==de.DELETED})),this.syncStoreData()}},{key:"syncSetting",value:function(){if([me.NO_LOGIN].includes(this.passwordStore.serviceStatus))throw new Error("当前状态不允许该操作："+this.passwordStore.serviceStatus);if(!this.databaseClient)throw new Error("系统异常databaseClient isnull syncLabelData");return this.databaseClient.setSettingData(JSON.stringify(this.settingStore.setting))}},{key:"syncStoreData",value:function(){if(this.serviceStatusAssert(me.UNLOCKED),this.storeData={passwordData:ue(this.passwordStore.mainPassword,JSON.stringify(we(this.passwordStore.allPasswordArray))),labelData:ue(this.passwordStore.mainPassword,JSON.stringify(this.passwordStore.labelArray)),mainPasswordType:this.passwordStore.mainPasswordType},!this.databaseClient)throw new Error("系统异常databaseClient isnull syncLabelData");return this.databaseClient.setStoreData(JSON.stringify(this.storeData))}},{key:"getStoreData",value:function(){if(this.storeData)return this.storeData;throw new Error("文件不存在")}},{key:"closeAccount",value:(e=s(o().mark((function e(){var t=this;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=s(o().mark((function e(r){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serviceStatusAssert(me.UNLOCKED),t.databaseClient){e.next=3;break}throw new Error("系统异常databaseClient isnull closeAccount");case 3:return e.next=5,t.databaseClient.deleteStoreData().catch((function(e){return e}));case 5:return n=e.sent,e.next=8,t.databaseClient.deleteSettingData().catch((function(e){return e}));case 8:r(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}]);var e,t,r,n}(),Oe=e("u",Z("passwordStore",{state:function(){return{passwordManager:new Le,allPasswordArray:[],labelArray:[],mainPassword:"",serviceStatus:me.NO_LOGIN,topicMode:he.AUTO,mainPasswordType:ge.GESTURE,timeoutLock:null,globalLoading:{vis:!1,timeout:null,content:""},filterCondition:{searchText:"",labelArray:[],favoriteId:0}}},getters:{passwordArray:function(){var e=Se();return this.allPasswordArray.filter((function(e){return e.status===de.NORMAL})).sort((function(t,r){var n=t[e.setting.sortField],a=r[e.setting.sortField];return"strength"===e.setting.sortField&&(n=Re(t.password),a=Re(r.password)),n>a?e.setting.sortOrder===pe.ASC?1:-1:n<a?e.setting.sortOrder===pe.ASC?-1:1:0}))},deletedArray:function(){return this.allPasswordArray.filter((function(e){return e.status===de.DELETED})).sort((function(e,t){return e.deleteTime>t.deleteTime?1:e.deleteTime<t.deleteTime?-1:0}))},favoritePasswordArray:function(){return this.passwordArray.filter((function(e){return e.favorite})).sort((function(e,t){return e.favoriteTime>t.favoriteTime?1:e.favoriteTime<t.favoriteTime?-1:0}))},visPasswordArray:function(){var e=this;return this.passwordArray.filter((function(t){if(e.filterCondition.favoriteId)return t.id===e.filterCondition.favoriteId;var n=!0,a=!0;if(e.filterCondition.searchText){n=!1;var o,i=d([t.title,t.address,t.username,t.password,t.remark].concat(r(Object.entries(t.customFields).flat())).filter(Boolean));try{for(i.s();!(o=i.n()).done;){var s=o.value;if(Me(e.filterCondition.searchText.trim(),s)){n=!0;break}}}catch(p){i.e(p)}finally{i.f()}}if(e.filterCondition.labelArray.length){a=!1;var u,c=new Set(t.labels),l=d(e.filterCondition.labelArray);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(c.has(f)){a=!0;break}}}catch(p){l.e(p)}finally{l.f()}}return n&&a}))},isDark:function(){return this.topicMode===he.DARK}},actions:{setServiceStatus:function(e){this.serviceStatus=e},logout:function(){sessionStorage.removeItem("loginForm"),localStorage.removeItem("loginInfo"),localStorage.removeItem("mainPassword"),localStorage.removeItem("topicMode"),this.passwordManager=new Le,this.allPasswordArray=[],this.labelArray=[],this.mainPassword="",this.serviceStatus=me.NO_LOGIN,Oe().$resetFields(),Ae().$resetFields(),Se().$resetFields(),location.href=Ke()+"#/login"},setTopicMode:function(e){if(localStorage.setItem("topicMode",e),e===he.AUTO){var t,r,n=window.matchMedia("(prefers-color-scheme: dark)");Q().value=n.matches,this.topicMode=n.matches?he.DARK:he.LIGHT,null===(t=window.electronAPI)||void 0===t||t.setTopic("system"),null===(r=window.androidAPI)||void 0===r||r.setTopic("system")}else if(e===he.DARK){var a,o;Q().value=!0,this.topicMode=he.DARK,null===(a=window.electronAPI)||void 0===a||a.setTopic(this.topicMode),null===(o=window.androidAPI)||void 0===o||o.setTopic(this.topicMode)}else if(e===he.LIGHT){var i,s;Q().value=!1,this.topicMode=he.LIGHT,null===(i=window.electronAPI)||void 0===i||i.setTopic(this.topicMode),null===(s=window.androidAPI)||void 0===s||s.setTopic(this.topicMode)}},loading:function(e){var t=this;this.globalLoading.timeout=setTimeout((function(){t.globalLoading.timeout=null,t.globalLoading.vis=!0,t.globalLoading.content=e||"请稍等"}),300)},unloading:function(){this.globalLoading.timeout&&(clearTimeout(this.globalLoading.timeout),this.globalLoading.timeout=null),this.globalLoading.vis=!1},resetTimeoutLock:function(){var e=this;this.timeoutLock&&(clearTimeout(this.timeoutLock),this.timeoutLock=null);var t=Se();0!==t.setting.timeoutLock&&(this.timeoutLock=setTimeout((function(){if(t.setting.timeoutLock&&e.serviceStatus===me.UNLOCKED&&!t.setting.autoUnlock){var r,n;e.passwordManager.lock();var a=xe();null===(r=a.settingRef)||void 0===r||r.closeSetting(),null===(n=a.passwordFormRef)||void 0===n||n.closePasswordForm()}}),1e3*t.setting.timeoutLock))}}})),Ne=(e("E",(function(e){return e&&/^.*:\/\/.*$/.test(e)})),i("")),Ce=e("d",(function(){var e=window.innerWidth;return Ne.value=e<768?"xs":e>=768&&e<992?"sm":e>=992&&e<1200?"md":e>=1200&&e<1920?"lg":"xl",Ne}));function Ie(e){return Fe.apply(this,arguments)}function Fe(){return Fe=s(o().mark((function e(t){var r,n,a=arguments;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.length>1&&void 0!==a[1]&&a[1],(n=document.createElement("textarea")).setAttribute("readonly","readonly"),n.value=t,document.body.appendChild(n),n.setSelectionRange(0,n.value.length),n.select(),document.execCommand("copy"),document.body.removeChild(n),r||j.success("复制成功");case 10:case"end":return e.stop()}}),e)}))),Fe.apply(this,arguments)}window.onresize=function(){Ce()};var Me=function(e,t){if(!t)return!1;var r=e.toLowerCase();return!!t.toLowerCase().includes(r)},Re=e("F",(function(e){if(!e)return 0;var t=0;return/[0-9]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[^0-9a-zA-Z_]/.test(e)&&t++,e.length<6&&t>2&&(t=2),t>3?3:t})),je={uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lowercase:"abcdefghijklmnopqrstuvwxyz",number:"0123456789",symbol:"~!@#$%^&*()_-+=.,;"};function _e(e){var t=[e.uppercase?je.uppercase:"",e.lowercase?je.lowercase:"",e.number?je.number:"",e.symbol?je.symbol:""].filter(Boolean),r=Se();if(r.setting.easyConfuseChat)for(var n=r.setting.easyConfuseChat.split(""),a=0;a<t.length;a++)for(var o=0;o<n.length;o++)t[a]=t[a].replace(n[o],"");if(!(t=t.filter(Boolean)).length)return M.error({title:"生成失败",message:"请检查易混淆字符配置"}),"";for(var i="",s=0;s<e.length;s++){var u=t[s%t.length];i+=u[Math.floor(Math.random()*u.length)]}return i.split("").sort((function(){return Math.random()-.5})).join("")}e("g",(function(e,t){if(!e.labels)return[];var r=[];return function t(r,n){for(var a=0;a<r.length;a++)e.labels.includes(r[a].id)&&n.push(r[a]),r[a].children.length&&t(r[a].children,n)}(t||Oe().labelArray,r),r})),e("D",(function(e){var t=e.title+"\r\n";if(e.address&&(t+="地址: "+e.address+"\r\n"),e.username&&(t+="用户名: "+e.username+"\r\n"),e.password&&(t+="密码: "+e.password+"\r\n"),e.customFields)for(var r in e.customFields)t+=r+": "+e.customFields[r]+"\r\n";e.remark&&(t+=e.remark+"\r\n"),Ie(t=t.substring(0,t.length-2),!0),j.success("已复制到剪切板")})),e("C",(function(e){return["","#F56C6C","#FF9700","#67C23A"][Re(e)]})),e("B",(function(e){return["","弱密码","中等强度密码","强密码"][Re(e)]}));var Be=e("f",(function(e,t){var r=new Date(e),n=function(e){return e<10?"0"+e:e},a=r.getFullYear(),o=n(r.getMonth()+1),i=n(r.getDate()),s=n(r.getHours()),u=n(r.getMinutes()),c=n(r.getSeconds());return t.replace("YYYY",a.toString()).replace("MM",o.toString()).replace("DD",i.toString()).replace("HH",s.toString()).replace("mm",u.toString()).replace("ss",c.toString())})),Ge=(e("c",(function(e,t){var r=t.split(/[^A-Za-z]/),n=e.split(/[^0-9]/),a={};r.forEach((function(e,t){a[e]=parseInt(n[t],10)}));var o=a.YYYY||1970,i=(a.MM||1)-1,s=a.DD||1,u=a.HH||0,c=a.mm||0,l=a.ss||0;return new Date(o,i,s,u,c,l)})),e("x",(function(e,t){var r=Date.now();t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));if(-1!==n){var a=e[n];if(Ue(t,a)){if(t.labels&&t.labels.length>0){var o=new Set(a.labels);a.labels=t.labels.filter((function(e){return!o.has(e)}))}}else t.remark+="（合并恢复 "+Be(Date.now(),"YYYY-MM-DD HH:mm")+"）",t.id=r++,e.push(t)}else e.push(t)}))})),e("y",(function(e,t){var r,n=Date.now(),a=function e(t,r){var n,a=d(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;if(o.id===r)return!0;if(o.children&&o.children.length>0)return e(o.children,r)}}catch(i){a.e(i)}finally{a.f()}return!1},o=function t(r,o){var i=function(e,t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var a=r.value;if(a.id===t.id&&a.name===t.name&&a.pid===t.pid)return a}}catch(o){n.e(o)}finally{n.f()}}(r,o);if(i){var s,u=d(o.children);try{for(u.s();!(s=u.n()).done;){var c=s.value;t(i.children,c)}}catch(l){u.e(l)}finally{u.f()}}else a(e,o.id)&&(o.id=n++),r.push(o)},i=d(t);try{for(i.s();!(r=i.n()).done;){var s=r.value;o(e,s)}}catch(u){i.e(u)}finally{i.f()}})),e("s",(function(){var e=0;return function t(r){r.forEach((function(r){e++,r.children&&r.children.length>0&&t(r.children)}))}(Oe().labelArray),e})),e("j",(function(e){var t="";return function r(n,a){n.forEach((function(n){e.includes(n.id)&&(t&&(t+="、"),t+=a+"->"+n.name),n.children&&n.children.length>0&&r(n.children,n.name)}))}(Oe().labelArray,""),t})),e("p",(function(e){var t=e.split("、"),r=[];return t.forEach((function(e){var t=e.split("->").map((function(e){return e.trim()})),n=void 0;t.forEach((function(e,t){var a,o,i;0===t?!(a=r.find((function(t){return t.name===e&&0===t.pid})))&&e&&(a={id:ze(),name:e,pid:0,children:[]},r.push(a)):(a=null===(o=n)||void 0===o?void 0:o.children.find((function(t){return t.name===e})))||(a={id:ze(),name:e,pid:n?n.id:0,children:[]},null===(i=n)||void 0===i||i.children.push(a));n=a}))})),r})),function(e){return e.title+e.username+e.address+e.password+e.remark}),Ue=e("h",(function(e,t){return Ge(e)===Ge(t)})),Ke=function(){var e=location.origin;return e.startsWith("file://")&&(e+=location.pathname),e},Je=(e("z",(function(e,t){if(!e)return"";var r=e.replace("rgb","rgba");return r=r.replace(")",","+t+")")})),Date.now()),ze=e("i",(function(){return Je++})),Ye=e("m",(function(e){return Ke()+"/#/login?type="+e.loginType+"&autoLogin="+ue("password-xl",JSON.stringify(e))})),Ve=function(e){return S("data-v-a27813a2"),e=e(),x(),e}((function(){return y("span",{class:"iconfont icon-verify"},null,-1)})),We={style:{"margin-top":"5px"}},He={style:{"margin-top":"10px"}},Xe={style:{"margin-top":"5px"}},Ze=p({__name:"FastLogin",setup:function(e,t){var r=t.expose,n=q(),a=i(""),o=i(!1),s=function(){o.value=!1,n.push("/")};return r({fastLoginTip:function(e){-1!==location.href.indexOf("autoLogin")||window.electronAPI||window.androidAPI?n.push("/"):(a.value=Ye(e),o.value=!0)},getFastLoginForm:function(e){return JSON.parse(le("password-xl",e))}}),function(e,t){var r=_,n=B,i=G,u=U;return h(),v(u,{fullscreen:["xs","sm"].includes(b(Ce)().value),"append-to-body":!0,width:"700px",modelValue:b(o),"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(o)?o.value=e:null})},{header:m((function(){return[g(r,{size:"large",style:{"user-select":"none"}},{default:m((function(){return[Ve,w(" 登录成功 ")]})),_:1})]})),footer:m((function(){return[g(i,{type:"primary",onClick:s},{default:m((function(){return[w("好的")]})),_:1})]})),default:m((function(){return[y("div",null,[g(r,{type:"info"},{default:m((function(){return[w("以下链接可以自动输入登录信息，您可以保存此链接以防丢失：")]})),_:1})]),y("div",We,[g(n,{type:"textarea",rows:7,"model-value":b(a)},null,8,["model-value"])]),y("div",He,[g(r,{type:"info"},{default:m((function(){return[w("该链接为password-XL首页地址，您可以收藏：")]})),_:1})]),y("div",Xe,[g(n,{readonly:"","model-value":b(Ke)()},null,8,["model-value"])])]})),_:1},8,["fullscreen","modelValue"])}}}),$e=e("_",(function(e,r){var n,a=e.__vccOpts||e,o=d(r);try{for(o.s();!(n=o.n()).done;){var i=t(n.value,2),s=i[0],u=i[1];a[s]=u}}catch(c){o.e(c)}finally{o.f()}return a})),Qe=$e(Ze,[["__scopeId","data-v-a27813a2"]]),qe=e("r",p({__name:"GesturePassword",props:{ciphertext:{type:String},showGesture:{type:Boolean,default:!0}},emits:["complete","pass","fail"],setup:function(e,t){var n=t.emit,a=Oe(),o=n,s=e,u=D([]),l=D([]),f=i(),p=i(),d=void 0,v=i(!1),m=i(""),g=i(null),w=3,b=.33,k="#cacaca",S=.25,x="#409EFF",T="#F56C6C",A=12,L="rgba(64,158,255,0.32)",O="rgba(245,108,108,0.32)",N=function(e){M()},C=function(e){M()},I=function(){var e=l.map((function(e){return e.id})).join();F(e),M()},F=function(e){if(!s.ciphertext)return l.length=0,e.length<5?void j.warning("请至少连接3个点"):void o("complete",fe(e));m.value=a.passwordManager.verifyPassword(e,s.ciphertext)?"pass":"fail",M(),m.value?o("pass",fe(e)):o("fail",fe(e)),setTimeout((function(){m.value="",l.length=0,M()}),500)},M=function(){f.value&&p.value&&(_(),B(),z(),s.showGesture&&(U(),G(),R()))},R=function(){if(d){var e=r(l);if(g.value&&v.value&&!m.value&&e.push(g.value),!(e.length<2))for(var t=1;t<e.length;t++){var n=e[t-1],a=e[t];d.beginPath(),d.strokeStyle="fail"===m.value?O:L,d.lineWidth=A,d.moveTo(n.x,n.y),d.lineTo(a.x,a.y),d.stroke()}}},_=function(){if(v.value&&"fail"!==m.value){var e=K();if(e)l.find((function(t){return t.id===e.id}))||l.push(e)}},B=function(){d&&p.value&&d.clearRect(0,0,p.value.width,p.value.height)},G=function(){if(f.value&&p.value&&d)for(var e=0;e<l.length;e++){var t=l[e];J(t)}},U=function(){if(f.value&&p.value&&d&&!m.value&&g.value){var e=K();e&&J(e)}},K=function(){if(!(f.value&&p.value&&d&&g.value))return null;for(var e=0;e<u.length;e++){var t,r=u[e];if(n=r.x,a=r.y,o=r.radius,i=g.value.x,s=null===(t=g.value)||void 0===t?void 0:t.y,Math.sqrt((i-n)*(i-n)+(s-a)*(s-a))<=o)return r}var n,a,o,i,s;return null},J=function(e){d&&(d.beginPath(),d.fillStyle=m.value?T:x,d.arc(e.x,e.y,e.radius*S,0,2*Math.PI),d.fill(),d.beginPath(),d.fillStyle=m.value?O:L,d.arc(e.x,e.y,e.radius*S*2,0,2*Math.PI),d.fill(),d.beginPath(),d.strokeStyle=m.value?T:x,d.lineWidth=2,d.arc(e.x,e.y,e.radius,0,2*Math.PI),d.stroke())},z=function(){d&&u.forEach((function(e){d&&(d.beginPath(),d.strokeStyle=k,d.lineWidth=2,d.arc(e.x,e.y,e.radius,0,2*Math.PI),d.stroke(),d.beginPath(),d.fillStyle=k,d.arc(e.x,e.y,e.radius*S,0,2*Math.PI),d.fill())}))},Y=function(e){v.value=!0;var t={x:e.offsetX,y:e.offsetY};g.value=t,N()},V=function(e){var t={x:e.offsetX,y:e.offsetY};g.value=t,C()},W=function(){v.value&&(v.value=!1,g.value=null,I())},H=function(){v.value&&(v.value=!1,g.value=null,I())},X=function(e){if(p.value){v.value=!0;var t=p.value.getBoundingClientRect(),r={x:e.touches[0].clientX-t.x,y:e.touches[0].clientY-t.y};g.value=r,N()}},Z=function(e){if(p.value){var t=p.value.getBoundingClientRect(),r={x:e.touches[0].clientX-t.x,y:e.touches[0].clientY-t.y};g.value=r,C()}},$=function(){v.value&&(v.value=!1,g.value=null,I())};var Q=function(){if(f.value&&p.value){var e=f.value.clientWidth;p.value.width=e,p.value.height=e,d=function(e,t,r){var n=window.devicePixelRatio||1;e.width=t*n,e.height=r*n,e.style.width="".concat(t,"px"),e.style.height="".concat(r,"px");var a=e.getContext("2d");return a.scale(n,n),a}(p.value,e,e);var t=0;u.length=0;for(var r=0;r<w;r++)for(var n=0;n<w;n++){var a=e/w,o={id:t++,x:r*e/w+a/2,y:n*e/w+e/w/2,radius:a*b};u.push(o)}M()}},q=null;return window.onresize=function(){q&&clearTimeout(q),q=setTimeout(Q,100)},P((function(){c((function(){Q()}))})),function(e,t){return h(),E("div",{ref_key:"gestureDivRef",ref:f,style:{width:"100%",height:"100%"}},[y("canvas",{ref_key:"canvasRef",ref:p,style:{"image-rendering":"auto"},onMousedown:Y,onMousemove:V,onMouseup:W,onMouseleave:H,onTouchstart:X,onTouchmove:Z,onTouchend:$},null,544)],512)}}})),et=function(e){return S("data-v-5267c5a6"),e=e(),x(),e},tt=et((function(){return y("span",{class:"iconfont icon-verify"},null,-1)})),rt=et((function(){return y("span",{style:{"font-weight":"bold"}}," · ",-1)})),nt={key:0,style:{margin:"20px"}},at={key:1,style:{margin:"20px"}},ot={style:{display:"flex","justify-content":"space-between"}},it=p({__name:"VerifyMainPassword",setup:function(e,t){var r=t.expose,n=q(),a=Oe(),u=Se(),c=i(),l=i(),f=i(!1),p=i(null),d=i(""),S=i(JSON.parse(JSON.stringify(a.mainPasswordType))),x=i(),P=D({mainPassword:""}),N=D({mainPassword:[{required:!0,message:"请输入主密码",trigger:"change"}]}),C=function(e){e.validate((function(e){e?"getAndVerify"===d.value?F():"verifyAndUnlock"===d.value&&M():c.value.focus()}))},I=function(e){P.mainPassword=e,"getAndVerify"===d.value?F():"verifyAndUnlock"===d.value&&M()},F=function(){if(!x.value)return f.value=!1,void(p.value&&p.value(P.mainPassword));try{if(!x.value(P.mainPassword))return void j.error("验证失败")}catch(e){return void j.error("验证失败")}f.value=!1,p.value&&p.value(P.mainPassword)},M=function(){a.passwordManager.verifyPassword(P.mainPassword)?a.passwordManager.unlock(P.mainPassword)?(f.value=!1,p.value&&p.value(P.mainPassword)):j.error("验证失败"):j.error("验证失败")},R=function(){f.value=!1,n.push("/login")},Y=function(){var e;S.value===ge.STANDARD&&(null===(e=c.value)||void 0===e||e.focus())},V=function(){if(a.serviceStatus===me.NO_LOGIN&&"false"===localStorage.getItem("showGesture"))return!1;return u.setting.verifyShowGesture};return r({getAndVerify:function(e,t){var r;(S.value=t||a.mainPasswordType,d.value="getAndVerify",x.value=e,t===ge.STANDARD)&&(null===(r=l.value)||void 0===r||r.resetFields());return P.mainPassword="",f.value=!0,new Promise((function(e){return p.value=e}))},verifyAndUnlock:function(){var e;(S.value=a.mainPasswordType,d.value="verifyAndUnlock",a.mainPasswordType===ge.STANDARD)&&(null===(e=l.value)||void 0===e||e.resetFields());return P.mainPassword="",f.value=!0,new Promise(function(){var e=s(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.value=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),function(e,t){var r=_,n=B,o=K,i=J,s=qe,u=z,p=G,d=U;return h(),v(d,{top:"20vh",width:["xs","sm"].includes(b(Ce)().value)?"95%":"400px",modelValue:b(f),"onUpdate:modelValue":t[4]||(t[4]=function(e){return k(f)?f.value=e:null}),"close-on-click-modal":b(a).serviceStatus!==b(me).NO_LOGIN,"close-on-press-escape":b(a).serviceStatus!==b(me).NO_LOGIN,"show-close":b(a).serviceStatus!==b(me).NO_LOGIN,onOpened:Y,onOpen:t[5]||(t[5]=function(e){var t;return null===(t=b(l))||void 0===t?void 0:t.resetFields()})},{header:m((function(){return[g(r,{size:"large",style:{"user-select":"none"}},{default:m((function(){return[tt,b(a).serviceStatus===b(me).NO_LOGIN?(h(),E(T,{key:0},[w("自动登录"),rt],64)):A("",!0),w("验证主密码 ")]})),_:1})]})),footer:m((function(){return[y("div",ot,[y("div",null,[b(a).serviceStatus===b(me).NO_LOGIN?(h(),v(u,{key:0,type:"primary",onClick:R,underline:!1},{default:m((function(){return[w("返回登录页")]})),_:1})):A("",!0)]),b(S)===b(ge).STANDARD?(h(),v(p,{key:0,onClick:t[3]||(t[3]=function(e){return C(b(l))}),type:"primary"},{default:m((function(){return[w("确定")]})),_:1})):A("",!0)])]})),default:m((function(){return[b(S)===b(ge).STANDARD?(h(),E("div",nt,[g(i,{ref_key:"formRef",ref:l,onSubmit:t[2]||(t[2]=L((function(){}),["prevent"])),model:b(P),rules:b(N)},{default:m((function(){return[g(o,{prop:"mainPassword"},{default:m((function(){return[g(n,{ref_key:"passwordInputRef",ref:c,type:"password","show-password":"",autocomplete:"new-password",onKeyup:t[0]||(t[0]=O((function(e){return C(b(l))}),["enter","native"])),modelValue:b(P).mainPassword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b(P).mainPassword=e}),placeholder:"请输入主密码"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])])):A("",!0),b(S)===b(ge).GESTURE?(h(),E("div",at,[g(s,{onComplete:I,"show-gesture":V()},null,8,["show-gesture"])])):A("",!0)]})),_:1},8,["width","modelValue","close-on-click-modal","close-on-press-escape","show-close"])}}}),st=$e(it,[["__scopeId","data-v-5267c5a6"]]),ut={key:0,alt:"",class:"back-img hidden-xs-only",src:"data:image/svg+xml,%3csvg%20version='1.1'%20baseProfile='full'%20width='100%25'%20height='100%25'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201400%20800'%20%3e%3crect%20x='1300'%20y='400'%20rx='40'%20ry='40'%20width='300'%20height='300'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%201450%20550'%20to='360%201450%20550'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3cpath%20d='M%20100%20350%20A%20150%20150%200%201%201%20400%20350%20Q400%20370%20380%20370%20L%20250%20370%20L%20120%20370%20Q100%20370%20100%20350'%20stroke='rgb(253,%20214,%2099)'%20fill='rgb(253,%20214,%2099)'%3e%3canimateMotion%20path='M%20800%20-200%20L%20800%20-300%20L%20800%20-200'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20210%20530%20;%20-30%20210%20530%20;%200%20210%20530'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3ccircle%20cx='200'%20cy='150'%20r='20'%20stroke='%231a73e8'%20fill='%231a73e8'%3e%3canimateMotion%20path='M%200%200%20L%2040%2020%20Z'%20dur='5s'%20repeatCount='indefinite'%20/%3e%3c/circle%3e%3c!--%20三角形%20--%3e%3cpath%20d='M%20165%20580%20L%20270%20580%20Q275%20578%20270%20570%20L%20223%20483%20Q220%20480%20217%20483%20L%20165%20570%20Q160%20578%20165%20580'%20stroke='rgb(238,%20103,%2092)'%20fill='rgb(238,%20103,%2092)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%20210%20530'%20to='360%20210%20530'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3ccircle%20cx='1200'%20cy='600'%20r='30'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%200%200%20L%20-20%2040%20Z'%20dur='9s'%20repeatCount='indefinite'%20/%3e%3c/circle%3e%3cpath%20d='M%20100%20350%20A%2040%2040%200%201%201%20180%20350%20L%20180%20430%20A%2040%2040%200%201%201%20100%20430%20Z'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%20140%20390%20L%20180%20360%20L%20140%20390'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20140%20390;%20-60%20140%20390;%200%20140%20390'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3crect%20x='900'%20y='600'%20rx='30'%20ry='30'%20width='90'%20height='90'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='50s'%20type='rotate'%20from='0%20900%20550'%20to='360%20900%20550'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3c/svg%3e"},ct={key:1,alt:"",class:"back-img hidden-sm-and-up",src:"data:image/svg+xml,%3csvg%20version='1.1'%20baseProfile='full'%20width='100%25'%20height='100%25'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20800%201400'%20%3e%3c!--%20绿色大方块--%3e%3crect%20x='700'%20y='1000'%20rx='40'%20ry='40'%20width='300'%20height='300'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%20style='transform-box:fill-box;%20transform-origin:center;'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%200%200'%20to='360%200%200'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3c!--%20白色椭圆--%3e%3cpath%20d='M%20100%20350%20A%2040%2040%200%201%201%20180%20350%20L%20180%20430%20A%2040%2040%200%201%201%20100%20430%20Z'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%20240%20590%20L%20180%20360%20L%20240%20590'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20140%20390;%20-60%20140%20390;%200%20140%20390'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c!--%20绿色小方块--%3e%3crect%20x='400'%20y='600'%20rx='40'%20ry='40'%20width='100'%20height='100'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='-30%20550%20750'%20to='330%20550%20750'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3csvg%20viewBox='0%200%201024%201024'%20version='1.1'%20x='100'%20y='1100'%20xmlns='http://www.w3.org/2000/svg'%20width='200px'%20height='200px'%3e%3cpath%20d='M225.28%20163.84h573.44c45.056%200%2081.92%2036.864%2081.92%2081.92v450.56c0%2045.056-36.864%2081.92-81.92%2081.92H225.28c-45.056%200-81.92-36.864-81.92-81.92V245.76c0-45.056%2036.864-81.92%2081.92-81.92z%20m430.08%20450.56c79.872%200%20143.36-63.488%20143.36-143.36s-63.488-143.36-143.36-143.36-143.36%2063.488-143.36%20143.36%2063.488%20143.36%20143.36%20143.36z%20m0-81.92c34.816%200%2061.44-26.624%2061.44-61.44s-26.624-61.44-61.44-61.44-61.44%2026.624-61.44%2061.44%2026.624%2061.44%2061.44%2061.44z'%20fill='%230af1f4'%20style='transform-box:fill-box;%20transform-origin:center;'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20from='0%200%200'%20to='360%200%200'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e%3c/svg%3e"},lt=["element-loading-text"],ft=p({__name:"App",setup:function(e){var t=xe(),r=Se(),n=Oe(),a=localStorage.getItem("topicMode")||"auto";n.setTopicMode(a),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){var e=localStorage.getItem("topicMode")||"auto";n.setTopicMode(e)}));var o,s=i(!1);return(o=localStorage.getItem("dynamicBackground"))&&"true"!==o||(s.value=!0),N((function(){return r.setting.dynamicBackground}),(function(e){localStorage.setItem("dynamicBackground",e.toString()),s.value=r.setting.dynamicBackground})),function(e,r){var a=I("router-view"),o=st,i=Qe,u=Y,c=V;return h(),E(T,null,[b(s)?(h(),E("img",ut)):A("",!0),b(s)?(h(),E("img",ct)):A("",!0),C((h(),E("div",{onClick:r[0]||(r[0]=function(e){return b(n).resetTimeoutLock()}),id:"password-app","element-loading-text":b(n).globalLoading.content},[g(u,{locale:b(W)},{default:m((function(){return[g(a),g(o,{ref:function(e){return b(t).verifyPasswordRef=e}},null,512),g(i,{ref:function(e){return b(t).fastLoginRef=e}},null,512)]})),_:1},8,["locale"])],8,lt)),[[c,b(n).globalLoading.vis]])],64)}}}),pt=function(e,t,r){var n=Promise.resolve();return n.then((function(){return e()})).catch((function(e){var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},dt=[{path:"/",name:"Index",component:function(){return pt((function(){return n.import("./IndexPage-legacy-CboIbrif.js")}),0,n.meta.url)}},{path:"/login",name:"Login",component:function(){return pt((function(){return n.import("./LoginPage-legacy-eOFW1jKt.js")}),0,n.meta.url)}}],ht=[me.LOGGED,me.WAIT_INIT,me.UNLOCKED],vt=ee({history:te(),routes:dt});vt.beforeEach((function(e,t,r){if("/login"!==e.path&&"/test"!==e.path){var n=Oe(),a=Se();if(ht.includes(n.serviceStatus))r();else if(a.setting.autoLogin&&!e.path.startsWith("/login"))try{Ae().autoLogin().then((function(e){e?r():r("/login")}))}catch(o){r("/login")}else r("/login")}else r()}));var mt=ne();mt.use((function(e){var t=e.options,r=e.store;r.$resetFields=function(e){var n=t.state,a=n?n():{};r.$patch((function(t){e&&(a=re(a,e)),Object.assign(t,a)}))}}));var gt=F(ft);gt.use(vt),gt.use(mt),gt.mount("#app")}}}))}();
