!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,s,i=[],u=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return i}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */a=function(){return r};var t,r={},n=Object.prototype,o=n.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},u=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(t){f=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var o=t&&t.prototype instanceof y?t:y,a=Object.create(o.prototype),i=new C(n||[]);return s(a,"_invoke",{value:A(e,r,i)}),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var h="suspendedStart",g="suspendedYield",v="executing",m="completed",w={};function y(){}function b(){}function k(){}var S={};f(S,u,(function(){return this}));var x=Object.getPrototypeOf,D=x&&x(x(M([])));D&&D!==n&&o.call(D,u)&&(S=D);var P=k.prototype=y.prototype=Object.create(S);function E(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function T(t,r){function n(a,s,i,u){var c=d(t[a],t,s);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==e(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,i,u)}),(function(e){n("throw",e,i,u)})):r.resolve(f).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,u)}))}u(c.arg)}var a;s(this,"_invoke",{value:function(e,t){function o(){return new r((function(r,o){n(e,t,r,o)}))}return a=a?a.then(o,o):o()}})}function A(e,r,n){var o=h;return function(a,s){if(o===v)throw Error("Generator is already running");if(o===m){if("throw"===a)throw s;return{value:t,done:!0}}for(n.method=a,n.arg=s;;){var i=n.delegate;if(i){var u=L(i,n);if(u){if(u===w)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===h)throw o=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=v;var c=d(e,r,n);if("normal"===c.type){if(o=n.done?m:g,c.arg===w)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(o=m,n.method="throw",n.arg=c.arg)}}}function L(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,L(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),w;var a=d(o,e.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,w;var s=a.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,w):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function M(r){if(r||""===r){var n=r[u];if(n)return n.call(r);if("function"==typeof r.next)return r;if(!isNaN(r.length)){var a=-1,s=function e(){for(;++a<r.length;)if(o.call(r,a))return e.value=r[a],e.done=!1,e;return e.value=t,e.done=!0,e};return s.next=s}}throw new TypeError(e(r)+" is not iterable")}return b.prototype=k,s(P,"constructor",{value:k,configurable:!0}),s(k,"constructor",{value:b,configurable:!0}),b.displayName=f(k,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,k):(e.__proto__=k,f(e,l,"GeneratorFunction")),e.prototype=Object.create(P),e},r.awrap=function(e){return{__await:e}},E(T.prototype),f(T.prototype,c,(function(){return this})),r.AsyncIterator=T,r.async=function(e,t,n,o,a){void 0===a&&(a=Promise);var s=new T(p(e,t,n,o),a);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},E(P),f(P,l,"Generator"),f(P,u,(function(){return this})),f(P,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=M,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(N),!e)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,o){return i.type="throw",i.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],i=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var u=o.call(s,"catchLoc"),c=o.call(s,"finallyLoc");if(u&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),N(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),w}},r}function s(e,t,r,n,o,a,s){try{var i=e[a](s),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){s(a,n,o,i,u,"next",e)}function u(e){s(a,n,o,i,u,"throw",e)}i(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,p(n.key),n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r){return(t=p(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}function d(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=h(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){i=!0,a=e},f:function(){try{s||null==r.return||r.return()}finally{if(i)throw a}}}}function h(e,t){if(e){if("string"==typeof e)return g(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./@vue-legacy-DKT3hqtJ.js","./element-plus-legacy-h_V_eBA9.js","./vendor-legacy-JkP7VFYq.js","./cos-js-sdk-v5-legacy-BMAW7OD5.js","./ali-oss-legacy-DIPzk0O8.js","./@element-plus-legacy-bi5OEa8d.js"],(function(e,n){"use strict";var s,c,p,h,g,v,m,w,y,b,k,S,x,D,P,E,T,A,L,O,N,C,M,I,F,R,j,_,B,G,U,K,J,z,Y,V,W,H,X,Z,$,Q,q,ee,te,re,ne,oe,ae;return{setters:[function(e){s=e.t,c=e.W,p=e.d,h=e.o,g=e.E,v=e.F,m=e.O,w=e.K,y=e.a,b=e.u,k=e.v,S=e.at,x=e.au,D=e.S,P=e.p,E=e.c,T=e.M,A=e.J,L=e._,O=e.a6,N=e.n,C=e.G,M=e.ac,I=e.al},function(e){F=e.E,R=e.a,j=e.b,_=e.c,B=e.d,G=e.e,U=e.f,K=e.g,J=e.h,z=e.i,Y=e.j,V=e.v,W=e.z},function(e){H=e.L,X=e.M,Z=e.N,$=e.O,Q=e.P,q=e.Q,ee=e.R,te=e.U,re=e.p,ne=e.V},function(e){oe=e.C},function(e){ae=e.O},null],execute:function(){var se=document.createElement("style");se.textContent=".icon-verify[data-v-a27813a2],.icon-verify[data-v-5267c5a6]{font-size:110%;color:#409eff;margin-right:5px}body,html{padding:0;margin:0}.back-img{width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:-2}#password-app{height:100vh}@font-face{font-family:iconfont;src:url("+new URL("iconfont-sCrWamCl.woff2?t=1720790383207",n.meta.url).href+') format("woff2"),url('+new URL("iconfont-IwnF_JHD.woff?t=1720790383207",n.meta.url).href+') format("woff"),url('+new URL("iconfont-bOWqBw0K.ttf?t=1720790383207",n.meta.url).href+') format("truetype")}.iconfont{font-family:iconfont!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-money:before{content:""}.icon-praise:before{content:""}.icon-company:before{content:""}.icon-idea:before{content:""}.icon-report:before{content:""}.icon-coffee:before{content:""}.icon-check-mark:before{content:""}.icon-pc:before{content:""}.icon-personalization:before{content:""}.icon-copyright:before{content:""}.icon-display:before{content:""}.icon-function:before{content:""}.icon-about:before{content:""}.icon-problem:before{content:""}.icon-diannao:before{content:""}.icon-create:before{content:""}.icon-open-file:before{content:""}.icon-recycle-bin:before{content:""}.icon-risk:before{content:""}.icon-show-password:before{content:""}.icon-recovery:before{content:""}.icon-merge:before{content:""}.icon-cover:before{content:""}.icon-danger:before{content:""}.icon-verify:before{content:""}.icon-recycle-bin-copy:before{content:""}.icon-logo:before{content:""}.icon-list:before{content:""}.icon-card:before{content:""}.icon-filtration:before{content:""}.icon-favorited:before{content:""}.icon-back:before{content:""}.icon-dice:before{content:""}.icon-refresh:before{content:""}.icon-peer-directory:before{content:""}.icon-sub-directory:before{content:""}.icon-info:before{content:""}.icon-menu:before{content:""}.icon-exit:before{content:""}.icon-import:before{content:""}.icon-export:before{content:""}.icon-collect:before{content:""}.icon-download:before{content:""}.icon-setting:before{content:""}.icon-copy:before{content:""}.icon-empty:before{content:""}.icon-lock-close:before{content:""}.icon-dark-mode:before{content:""}.icon-right-mode:before{content:""}.icon-more:before{content:""}.icon-show:before{content:""}.icon-label:before{content:""}.icon-edit:before{content:""}.icon-delete:before{content:""}.icon-lock:before{content:""}.icon-hide:before{content:""}.icon-search:before{content:""}.icon-share:before{content:""}.icon-unlock:before{content:""}\n',document.head.appendChild(se),e({A:_e,k:Me});var ie=e("q",(function(){var e="";try{e+=(Intl.DateTimeFormat().resolvedOptions().timeZone||"")+","}catch(n){}try{e+=(window.navigator.languages.join(",")||"")+",",e+=(window.navigator.hardwareConcurrency||"")+","}catch(n){}try{e+=(window.getComputedStyle(document.documentElement).fontFamily||"")+","}catch(n){}try{var t=document.createElement("canvas").getContext("webgl2");if(t){var r=t.getExtension("WEBGL_debug_renderer_info");r&&(e+=(t.getParameter(r.UNMASKED_RENDERER_WEBGL)||"")+",")}}catch(n){}return H.MD5(e).toString()})),ue=e("o",(function(e,t){var r=H.enc.Utf8.parse(t),n=H.enc.Utf8.parse(H.MD5(e).toString()),o=H.enc.Utf8.parse(H.MD5("password-xl").toString());return H.AES.encrypt(r,n,{iv:o,mode:H.mode.CBC,padding:H.pad.Pkcs7}).ciphertext.toString()})),ce=e("t",(function(e,t){try{return!!le(e,t)}catch(r){return!1}})),le=e("v",(function(e,t){var r=H.enc.Hex.parse(t),n=H.enc.Base64.stringify(r),o=H.enc.Utf8.parse(H.MD5(e).toString()),a=H.enc.Utf8.parse(H.MD5("password-xl").toString());return H.AES.decrypt(n,o,{iv:a,mode:H.mode.CBC,padding:H.pad.Pkcs7}).toString(H.enc.Utf8).toString()})),fe=function(e){return H.MD5(e).toString()},pe=e("n",function(e){return e.ASC="ascending",e.DESC="descending",e}(pe||{})),de=e("e",function(e){return e[e.NORMAL=0]="NORMAL",e[e.DELETED=1]="DELETED",e}(de||{})),he=e("T",function(e){return e.AUTO="auto",e.LIGHT="light",e.DARK="dark",e}(he||{})),ge=e("P",function(e){return e[e.CARD=0]="CARD",e[e.TABLE=1]="TABLE",e}(ge||{})),ve=e("S",function(e){return e.NO_LOGIN="初始化",e.LOGGED="已登录",e.WAIT_INIT="待初始化",e.UNLOCKED="已解锁",e}(ve||{})),me=e("M",function(e){return e.STANDARD="standard",e.GESTURE="gesture",e}(me||{})),we=function(e){for(var t={},r=[],n=0,o=0;o<e.length;o++){var a=[];for(var s in e[o])t.hasOwnProperty(s)||(t[s]=n++),a[t[s]]=e[o][s];r.push(a)}return{keys:t,dataArray:r}},ye=e("w",(function(e){for(var t=[],r=0;r<e.dataArray.length;r++){var n=e.dataArray[r],o={};for(var a in e.keys){var s=n[e.keys[a]];void 0!==s&&(o[a]=s)}t.push(o)}return t})),be=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"password-xl/store.json",setting:"password-xl/setting.json"}),f(this,"fileEtags",{}),f(this,"cosClient",null),f(this,"region",""),f(this,"bucket","")}),[{key:"login",value:(v=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("登录腾讯云COS"),this.cosClient=new oe({SecretId:t.secretId,SecretKey:t.secretKey}),this.region=t.region,this.bucket=t.bucket,e.abrupt("return",Promise.resolve({status:!0}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getStoreData",value:(g=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"setStoreData",value:(h=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(s=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getFile",value:(o=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("获取cos文件：",t),e.abrupt("return",new Promise((function(e,n){if(!r.cosClient)throw new Error("cos getFile 存储引擎不存在");r.cosClient.getObject({Bucket:r.bucket,Region:r.region,Key:t},(function(o,a){if(a)return r.updateEtag(t,a.ETag),void e(JSON.parse(a.Body.toString()));o&&404===o.statusCode?(console.log("cos 获取文件404"),e("")):(console.error("cos 获取文件错误：",o),F.error({title:"系统异常",message:r.errorDispose(o)}),n({status:!1,message:r.errorDispose(o)}))}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"uploadFile",value:(n=i(a().mark((function e(t,r){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("上传cos文件：",t,r.length),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(o,s){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.cosClient){e.next=2;break}throw new Error("cos uploadFile 存储引擎不存在");case 2:return e.next=4,n.checkEtag(t);case 4:if(e.sent){e.next=9;break}return console.log("上传cos文件 文件同步异常"),R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){console.log("刷新"),location.reload()}}),e.abrupt("return");case 9:n.cosClient.putObject({Bucket:n.bucket,Region:n.region,Key:t,Body:JSON.stringify(r)},(function(e,r){e?(console.error("cos上传文件错误：",e),F.error({title:"系统异常",message:n.errorDispose(e)}),s({status:!1,message:n.errorDispose(e)})):(n.updateEtag(t,r.ETag),o({status:!0}))}));case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("删除cos文件：",t),e.abrupt("return",new Promise((function(e,n){if(!r.cosClient)throw new Error("cos deleteFile 存储引擎不存在");r.cosClient.deleteObject({Bucket:r.bucket,Region:r.region,Key:t},(function(t){t?(console.error("cos删除文件错误：",t),F.error({title:"系统异常",message:r.errorDispose(t)}),n({status:!1,message:r.errorDispose(t)})):e({status:!0})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(e){if("InvalidAccessKeyId"===e.code)return"账户（secretId）无效";if("SignatureDoesNotMatch"===e.code)return"密钥（secretKey）无效";if("Error"===e.code){var t={"CORS blocked or network error":"有可能是存储桶（bucket）不存在、地域（region）错误、跨域配置错误","Access Denied.":"该账号无存储桶（bucket）权限或存储桶错误",'Bucket should format as "test-1250000000".':"存储桶（bucket）格式错误"}[e.message];return t||e.message}}return"COS登录异常-未知原因"}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=i(a().mark((function r(n){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.cosClient){r.next=2;break}throw new Error("cos getEtag 存储引擎不存在");case 2:t.cosClient.headObject({Bucket:t.bucket,Region:t.region,Key:e},(function(e,t){console.error(e),n(t.ETag)}));case 3:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=i(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fileEtags[t]=r;case 1:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,o,s,c,p,d,h,g,v}();e("H",be);var ke=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"password-xl/store.json",setting:"password-xl/setting.json"}),f(this,"fileEtags",{}),f(this,"ossClient",null)}),[{key:"login",value:(v=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.ossClient=new ae({region:t.region,accessKeyId:t.accessKeyId,accessKeySecret:t.accessKeySecret,bucket:t.bucket}),e.abrupt("return",Promise.resolve({status:!0}));case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",Promise.reject({status:!1,message:e.t0}));case 8:case"end":return e.stop()}}),e,this,[[0,5]])}))),function(e){return v.apply(this,arguments)})},{key:"getStoreData",value:(g=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"setStoreData",value:(h=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(s=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getFile",value:(o=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("获取oss文件：",t),e.abrupt("return",new Promise((function(e,n){if(!r.ossClient)throw new Error("oss getFile 存储引擎不存在");r.ossClient.get(t).then((function(n){r.updateEtag(t,JSON.parse(JSON.stringify(n.res.headers))["last-modified"]),e(n.content.toString())})).catch((function(t){t&&404===t.status?e(""):(F.error({title:"系统异常",message:r.errorDispose(t)}),n({status:!1,message:r.errorDispose(t)}))}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"uploadFile",value:(n=i(a().mark((function e(t,r){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("上传oss文件：",t,"length:",r.length),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(o,s){var u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.ossClient){e.next=2;break}throw new Error("oss uploadFile 存储引擎不存在");case 2:return e.next=4,n.checkEtag(t);case 4:if(e.sent){e.next=9;break}return console.log("上传oss文件 文件同步异常"),R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){console.log("刷新"),location.reload()}}),e.abrupt("return");case 9:u=X.Buffer.from(r),n.ossClient.put(t,u).then(i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.updateEtag(t);case 2:o({status:!0});case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.error("oss上传文件错误：",e),F.error({title:"系统异常",message:n.errorDispose(e)}),s({status:!1,message:n.errorDispose(e)})}));case 11:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("删除oss文件：",t),e.abrupt("return",new Promise((function(e,n){if(!r.ossClient)throw new Error("oss deleteFile 存储引擎不存在");r.ossClient.delete(t).then((function(){e({status:!0})})).catch((function(e){console.error(e),F.error({title:"系统异常",message:r.errorDispose(e)}),n({status:!1,message:r.errorDispose(e)})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(-1===e.status)return"有可能是存储桶（bucket）不存在、地域（region）错误、跨域配置错误";if(403===e.status){var t={InvalidAccessKeyId:"账号（AccessKeyId）无效",SignatureDoesNotMatch:"密钥（secretKey）无效",AccessDenied:"该账号无存储桶（bucket）权限或存储桶错误"}[e.code];return t||"权限错误"}return e.message}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=i(a().mark((function r(n){var o,s;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t.ossClient){r.next=2;break}throw new Error("oss getEtag 存储引擎不存在");case 2:return r.next=4,t.ossClient.head(e);case 4:o=r.sent,s=JSON.parse(JSON.stringify(o.res.headers))["last-modified"],n(s);case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=i(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=4;break}return e.next=3,this.getEtag(t);case 3:r=e.sent;case 4:this.fileEtags[t]=r;case 5:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,o,s,c,p,d,h,g,v}();e("I",ke);var Se=e("b",Z("settingStore",{state:function(){return{setting:{autoGeneratePassword:!0,customFields:[],easyConfuseChat:"0OoIil",showLabelCard:!0,showFavoriteCard:!0,enableRecycleBin:!1,enableShortcutKey:!0,generateRule:{length:16,lowercase:!0,number:!0,symbol:!0,uppercase:!0},showTimeForTable:"no",showLabelForTable:!0,showStrength:!0,sortOrder:pe.DESC,sortField:"addTime",timeoutLock:0,verifyShowGesture:!0,passwordDisplayMode:ge.TABLE,autoLogin:!0,autoUnlock:!1,showPasswordStatistics:!1,bgColors:["rgb(255,0,0)","rgb(255,136,0)","rgb(115,255,0)","rgb(0,208,255)","rgb(95,0,255)","rgb(178,0,255)","rgb(0,0,0)"],dynamicBackground:!0,passwordColor:!1}}}})),xe=e("a",Z("refStore",{state:function(){return{verifyPasswordRef:s(),passwordFormRef:s(),cancelAccountRef:s(),settingRef:s(),labelTreeRef:s(),labelTreeDivRef:s(),setPasswordRef:s(),recycleBinRef:s(),backupAndRecoveryRef:s(),fastLoginRef:s(),labelDrawer:s(),favoriteDrawer:s(),tourRef:s(),showPasswordRef:s(),exportExcelRef:s(),importExcelRef:s(),contextmenuRef:s(),createPasswordBtnRef:s(),passwordFormFormRef:s(),passwordFormTitleRef:s(),passwordFormGenerateBtnRef:s(),passwordFormGenerateRuleRef:s(),passwordFormSaveBtnRef:s(),displayModeCardRef:s(),displayModeTableRef:s(),searchInputRef:s()}}})),De=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"}),f(this,"fileEtags",{}),f(this,"serverUrl",""),f(this,"token","")}),[{key:"login",value:(v=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("登录私有服务"),this.serverUrl=t.serverUrl,e.abrupt("return",new Promise((function(e){$.post(r.serverUrl+"/login",{username:t.username,password:t.password}).then((function(t){console.log("私有服务登录结果：",t),200===t.status?200===t.data.code?(r.token=t.data.data,e({status:!0})):e({status:!1,message:t.data.message}):e({status:!1,message:t.statusText})})).catch((function(t){console.log("私有服务登录失败",t),e({status:!1,message:r.errorDispose(t.message)})}))})));case 3:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"getStoreData",value:(g=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"setStoreData",value:(h=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"deleteStoreData",value:(d=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"getSettingData",value:(p=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return p.apply(this,arguments)})},{key:"setSettingData",value:(c=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return c.apply(this,arguments)})},{key:"deleteSettingData",value:(s=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"getFile",value:(o=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("获取private文件：",t),e.abrupt("return",new Promise((function(e,n){$.post(r.serverUrl+"/get",{key:t},{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(o){return 500===o.data.code?(console.log("private 获取文件错误：",o.data),F.error({title:"系统异常",message:r.errorDispose(o.data.message)}),void n({status:!1,message:o.data.message})):404===o.data.code?(console.log("private 获取文件404"),void e("")):200===o.status?(r.updateEtag(t,o.data.data.etag),void e(o.data.data.content)):void n({status:!1,message:o.statusText})})).catch((function(e){F.error({title:"系统异常",message:e.message}),n({status:!1,message:e})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"uploadFile",value:(n=i(a().mark((function e(t,r){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("上传private文件：",t),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(o,s){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.checkEtag(t);case 2:if(e.sent){e.next=7;break}return console.log("上传private文件 文件同步异常"),R({title:"文件同步异常",message:"当前密码列表已被其他客户端更新，请刷新页面",showCancelButton:!1,showConfirmButton:!0,closeOnPressEscape:!1,showClose:!1,closeOnClickModal:!1,confirmButtonText:"刷新",callback:function(){console.log("刷新"),location.reload()}}),e.abrupt("return");case 7:$.post(n.serverUrl+"/put",{key:t,content:r},{headers:{Authorization:"Bearer ".concat(n.token)}}).then((function(e){return 500===e.data.code?(console.log("private 上传文件错误：",e.data),F.error({title:"系统异常",message:n.errorDispose(e.data.message)}),void s({status:!1,message:e.data.message})):200===e.status?(n.updateEtag(t,e.data.data.etag),void o({status:!0})):void s({status:!1,message:e.statusText})})).catch((function(e){F.error({title:"系统异常",message:e.message}),s({status:!1,message:e})}));case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"deleteFile",value:(r=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("删除private文件：",t),e.abrupt("return",new Promise((function(e,n){$.post(r.serverUrl+"/delete",{key:t},{headers:{Authorization:"Bearer ".concat(r.token)}}).then((function(t){if(500===t.data.code)return console.log("private 删除文件错误：",t.data),F.error({title:"系统异常",message:r.errorDispose(t.data.message)}),void n({status:!1,message:t.data.message});200!==t.status?n({status:!1,message:t.statusText}):e({status:!0})})).catch((function(e){n({status:!1,message:e})}))})));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"errorDispose",value:function(e){if(console.log(e),-1!==e.indexOf("Invalid URL"))return"无效的服务地址";return{"IORuntimeException: IOException: Permission denied":"服务端文件权限不足","Network Error":"无法连接到服务器"}[e]||e}},{key:"getEtag",value:function(e){var t=this;return new Promise(function(){var r=i(a().mark((function r(n,o){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:$.post(t.serverUrl+"/getEtag",{key:e},{headers:{Authorization:"Bearer ".concat(t.token)}}).then((function(e){if(500===e.data.code)return console.log("private 获取文件标记错误：",e.data),F.error({title:"系统异常",message:t.errorDispose(e.data.message)}),void o({status:!1,message:e.data.message});200!==e.status?o({status:!1,message:e.statusText}):n(e.data.data.etag)})).catch((function(e){F.error({title:"系统异常",message:e.message}),o({status:!1,message:e})}));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}())}},{key:"checkEtag",value:(t=i(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fileEtags[t]){e.next=2;break}return e.abrupt("return",Promise.resolve(!0));case 2:return e.next=4,this.getEtag(t);case 4:return r=e.sent,e.abrupt("return",this.fileEtags[t]===r);case 6:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)})},{key:"updateEtag",value:(e=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("private updateEtag:",r),this.fileEtags[t]=r;case 2:case"end":return e.stop()}}),e,this)}))),function(t,r){return e.apply(this,arguments)})}]);var e,t,r,n,o,s,c,p,d,h,g,v}();e("G",De);var Pe=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"})}),[{key:"login",value:(h=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("使用electron存储"),e.abrupt("return",Promise.resolve({status:!0}));case 2:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getStoreData",value:(d=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"setStoreData",value:(p=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deleteStoreData",value:(c=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getSettingData",value:(s=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setSettingData",value:(o=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"deleteSettingData",value:(n=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFile",value:(r=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("获取electron文件",t),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.electronAPI.getFile(t);case 2:n=e.sent,r(n||"");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"uploadFile",value:(t=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("上传electron文件",t),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.electronAPI.uploadFile(t,r),n({status:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"deleteFile",value:(e=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("删除electron文件",t),e.abrupt("return",new Promise((function(e){window.electronAPI.deleteFile(t),e({status:!0})})));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e,t,r,n,o,s,c,p,d,h}();e("J",Pe);var Ee=function(){return l((function e(){u(this,e),f(this,"fileNames",{store:"store.json",setting:"setting.json"})}),[{key:"login",value:(h=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("使用android存储"),e.abrupt("return",Promise.resolve({status:!0}));case 2:case"end":return e.stop()}}),e)}))),function(e){return h.apply(this,arguments)})},{key:"getStoreData",value:(d=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"setStoreData",value:(p=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.store,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return p.apply(this,arguments)})},{key:"deleteStoreData",value:(c=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.store));case 1:case"end":return e.stop()}}),e,this)}))),function(){return c.apply(this,arguments)})},{key:"getSettingData",value:(s=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"setSettingData",value:(o=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.uploadFile(this.fileNames.setting,t));case 1:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"deleteSettingData",value:(n=i(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.deleteFile(this.fileNames.setting));case 1:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getFile",value:(r=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("获取android文件",t),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.androidAPI.getFile(t);case 2:n=e.sent,r(n||"");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"uploadFile",value:(t=i(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("上传android文件",t),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.androidAPI.uploadFile(t,r),n({status:!0});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})},{key:"deleteFile",value:(e=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("删除android文件",t),e.abrupt("return",new Promise((function(e){window.androidAPI.deleteFile(t),e({status:!0})})));case 2:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})}]);var e,t,r,n,o,s,c,p,d,h}();e("K",Ee);var Te,Ae=e("l",Z("loginStore",{state:function(){return{loginType:"",logging:!1,loginForm:null}},actions:{startLogin:(Te=i(a().mark((function e(t,r){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("开始自动登录"),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(o){var s,i,u,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null,"oss"!==t.loginType){e.next=5;break}s=new ke,e.next=24;break;case 5:if("cos"!==t.loginType){e.next=9;break}s=new be,e.next=24;break;case 9:if("private"!==t.loginType){e.next=13;break}s=new De,e.next=24;break;case 13:if("electron"!==t.loginType){e.next=17;break}s=new Pe,e.next=24;break;case 17:if("android"!==t.loginType){e.next=21;break}s=new Ee,e.next=24;break;case 21:return console.error("未知的登录类型，无法自动登录：",t.loginType),o(!1),e.abrupt("return");case 24:return n.loginType=t.loginType,console.log("自动登录中..."),(i=Oe()).loading("自动登录中..."),e.next=30,s.login(t);case 30:if((u=e.sent).status){e.next=36;break}return console.log("自动登录失败 存储引擎登录失败",u),i.unloading(),o(!1),e.abrupt("return");case 36:return e.next=38,i.passwordManager.login(s).catch((function(){return o(!1)}));case 38:if((c=e.sent)&&c.status){e.next=44;break}return console.log("自动登录初始化失败",c),i.unloading(),o(!1),e.abrupt("return");case 44:i.serviceStatus===ve.LOGGED?(l=i.passwordManager.unlock(r),console.log("自动登录 解锁结果：",l),i.unloading(),o(l)):i.serviceStatus===ve.WAIT_INIT&&(i.unloading(),o(!0)),n.loginForm=t;case 46:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e,t){return Te.apply(this,arguments)}),autoLogin:function(){var e=this;return new Promise(function(){var t=i(a().mark((function t(r){var n,o,s,i,u,c;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=localStorage.getItem("loginInfo")){t.next=6;break}return console.log("自动登录loginInfo不存在"),r(!1),t.abrupt("return");case 6:if(o=le(ie(),n)){t.next=11;break}return console.log("自动登录loginInfo解密失败"),r(!1),t.abrupt("return");case 11:return s=JSON.parse(o),t.next=14,e.getMainPassword(s);case 14:return i=t.sent,console.log("使用主密码解密登录信息"),u=JSON.parse(le(i,s.loginForm)),t.next=19,e.startLogin(u,i);case 19:c=t.sent,console.log("本地缓存自动登录结果",c),r(c),t.next=28;break;case 24:t.prev=24,t.t0=t.catch(0),console.log(t.t0),r(!1);case 28:case"end":return t.stop()}}),t,null,[[0,24]])})));return function(e){return t.apply(this,arguments)}}())},getMainPassword:function(e){return i(a().mark((function t(){var r,n;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=localStorage.getItem("mainPassword"))){t.next=6;break}if(console.log("自动登录获取主密码 使用自动解锁的主密码"),n=le(ie(),r),!ce(n,e.loginForm)){t.next=6;break}return t.abrupt("return",n);case 6:return console.log("自动登录获取主密码 提示用户输入主密码"),t.next=9,xe().verifyPasswordRef.getAndVerify((function(t){return ce(t,e.loginForm)}),e.mainPasswordType);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t)})))()},setAutoLoginInfo:function(e){var t=Se(),r=sessionStorage.getItem("loginForm");if(t.setting.autoLogin&&r){var n=le(ie(),r);console.log("使用浏览器指纹解密登录信息loginForm");var o={mainPasswordType:Oe().mainPasswordType,loginForm:ue(e,n)};console.log("使用主密码加密登录信息loginInfo"),localStorage.setItem("loginInfo",ue(ie(),JSON.stringify(o))),sessionStorage.removeItem("loginForm")}if(t.setting.autoUnlock){var a=ie();localStorage.setItem("mainPassword",ue(a,e))}},updateRememberLoginInfo:function(e,t){console.log("修改密码，处理自动登录信息");try{var r=localStorage.getItem("loginInfo");if(!r)return console.log("修改记住的密码ciphertext不存在"),!1;var n=ie();console.log("解密登录西悉尼");var o=le(n,r);if(!o)return console.log("修改记住的密码ciphertext解密失败"),!1;var a=JSON.parse(o),s=Oe().mainPasswordType;return console.log("修改密码，设置主密码类型：",s),a.mainPasswordType=s,a.loginForm=ue(t,le(e,a.loginForm)),console.log("修改密码，存储登录信息"),localStorage.setItem("loginInfo",ue(n,JSON.stringify(a))),!0}catch(i){return console.error("修改密码处理自动登录信息异常",i),!1}}}})),Le=function(){return l((function e(){var t=this;u(this,e),f(this,"databaseClient",null),f(this,"storeData",null),f(this,"passwordStore",Oe()),f(this,"loginStore",Ae()),f(this,"settingStore",Se()),f(this,"refStore",xe()),f(this,"serviceStatusAssert",(function(e){if(t.passwordStore.serviceStatus!==e)throw new Error("当前服务状态不允许该操作："+t.passwordStore.serviceStatus)}))}),[{key:"login",value:(n=i(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("passwordManager 登录"),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(n,o){var s,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getStoreData();case 3:return s=e.sent,e.next=6,t.getSettingData();case 6:i=e.sent,s&&(r.storeData=JSON.parse(s),r.storeData&&r.storeData.mainPasswordType&&(r.passwordStore.mainPasswordType=r.storeData.mainPasswordType)),i&&(console.log("passwordManager 验证通过初始化设置信息"),Object.assign(r.settingStore.setting,JSON.parse(i))),console.log("passwordManager 设置存储引擎"),r.databaseClient=t,r.passwordStore.passwordManager=r,console.log("passwordManager 密码管理器初始化成功"),r.storeData&&r.storeData.passwordData?(r.passwordStore.mainPasswordType=r.storeData.mainPasswordType,r.passwordStore.setServiceStatus(ve.LOGGED)):r.passwordStore.setServiceStatus(ve.WAIT_INIT),n({status:!0}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),o({status:!1,message:e.t0});case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t,r){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"initMainPassword",value:(r=i(a().mark((function e(t,r){var n,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("passwordManager 初始化主密码"),this.serviceStatusAssert(ve.WAIT_INIT),!this.passwordStore.mainPassword){e.next=4;break}throw new Error("密码已存在，不允许初始化");case 4:if(this.databaseClient){e.next=6;break}throw new Error("系统异常");case 6:return console.log("passwordManager 初始化主密码开始"),e.prev=7,this.passwordStore.mainPassword=r,this.storeData={passwordData:ue(r,JSON.stringify(we([]))),labelData:ue(r,JSON.stringify([])),mainPasswordType:t},e.next=12,this.databaseClient.setStoreData(JSON.stringify(this.storeData));case 12:if((n=e.sent)&&n.status){e.next=15;break}return e.abrupt("return",Promise.reject(n));case 15:return e.next=17,this.syncSetting();case 17:if(e.sent){e.next=21;break}return console.log("passwordManager 同步设置异常"),e.abrupt("return",Promise.reject({status:!1,message:"设置同步失败"}));case 21:return console.log("passwordManager 同步设置成功"),this.passwordStore.mainPasswordType=t,console.log("passwordManager login 设置服务状态为已解锁"),this.passwordStore.setServiceStatus(ve.UNLOCKED),console.log("passwordManager 主密码初始化成功"),this.addDemoData(),e.next=29,this.syncStoreData();case 29:return c((function(){var e;null===(e=o.refStore.tourRef)||void 0===e||e.startTour()})),e.abrupt("return",Promise.resolve({status:!0}));case 33:return e.prev=33,e.t0=e.catch(7),e.abrupt("return",Promise.reject(e.t0));case 36:case"end":return e.stop()}}),e,this,[[7,33]])}))),function(e,t){return r.apply(this,arguments)})},{key:"addDemoData",value:function(){console.log("passwordManager 添加演示密码");var e={id:Date.now(),pid:0,name:"网站",children:[]},t={id:Date.now(),title:"百度（示例数据）",address:"https://www.baidu.com",username:"18395708888",password:_e(this.settingStore.setting.generateRule),remark:"百度网盘、百度贴吧",addTime:Date.now(),updateTime:Date.now(),deleteTime:0,favoriteTime:0,favorite:!0,customFields:{},labels:[e.id],status:de.NORMAL,bgColor:""};this.passwordStore.labelArray.push(e),this.passwordStore.allPasswordArray.push(t)}},{key:"verifyPassword",value:function(e,t){try{return t?!!le(e,t):!!this.storeData&&!!le(e,this.storeData.passwordData)}catch(r){return!1}}},{key:"updateMainPassword",value:(t=i(a().mark((function e(t,r,n){var o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.databaseClient){e.next=2;break}return e.abrupt("return",Promise.reject());case 2:if(console.log("passwordManager 修改主密码"),this.serviceStatusAssert(ve.UNLOCKED),this.verifyPassword(t)){e.next=8;break}return console.log("passwordManager 原密码验证失败，不允许修改"),e.abrupt("return",Promise.reject({status:!1,message:"旧密码错误"}));case 8:return console.log("passwordManager 原密码验证通过"),this.passwordStore.loading("密码修改中..."),o=JSON.stringify(this.storeData),this.storeData={passwordData:ue(n,JSON.stringify(we(this.passwordStore.allPasswordArray))),labelData:ue(n,JSON.stringify(this.passwordStore.labelArray)),mainPasswordType:r},e.next=14,this.databaseClient.setStoreData(JSON.stringify(this.storeData));case 14:if((s=e.sent)&&s.status){e.next=19;break}return this.storeData=JSON.parse(o),F.error({title:"系统异常",message:s.message}),e.abrupt("return",Promise.reject());case 19:return this.passwordStore.mainPasswordType=r,this.passwordStore.mainPassword=n,this.loginStore.updateRememberLoginInfo(t,n),console.log("passwordManager 主密码修改成功"),this.passwordStore.unloading(),e.abrupt("return",Promise.resolve({status:!0}));case 25:case"end":return e.stop()}}),e,this)}))),function(e,r,n){return t.apply(this,arguments)})},{key:"addPassword",value:function(e){console.log("passwordManager 新增密码：",e),this.serviceStatusAssert(ve.UNLOCKED);var t=o(o({},e),{},{id:Date.now(),addTime:Date.now(),updateTime:Date.now(),status:de.NORMAL});return this.passwordStore.allPasswordArray.unshift(t),this.syncStoreData()}},{key:"updatePassword",value:function(e){console.log("passwordManager 修改密码：",e.id),this.serviceStatusAssert(ve.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e.id}));return-1!==t?(this.passwordStore.allPasswordArray[t]=e,this.syncStoreData()):Promise.reject("没有找到这个密码："+e.id)}},{key:"deletePassword",value:function(e){if(console.log("passwordManager 删除密码：",e),this.serviceStatusAssert(ve.UNLOCKED),this.settingStore.setting.enableRecycleBin){var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t){if(this.passwordStore.allPasswordArray[t].status===de.DELETED)return this.completelyDeletePassword(e);var r=this.passwordStore.allPasswordArray[t];return r.deleteTime=Date.now(),r.status=de.DELETED,this.syncStoreData()}throw new Error("密码不存在")}return this.completelyDeletePassword(e)}},{key:"completelyDeletePassword",value:function(e){console.log("passwordManager 彻底删除密码：",e),this.serviceStatusAssert(ve.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t)return this.passwordStore.allPasswordArray.splice(t,1),this.syncStoreData();throw new Error("未找到指定ID的密码")}},{key:"cancelDeletePassword",value:function(e){console.log("passwordManager 取消删除密码：",e),this.serviceStatusAssert(ve.UNLOCKED);var t=this.passwordStore.allPasswordArray.findIndex((function(t){return t.id===e}));if(-1!==t){var r=this.passwordStore.allPasswordArray[t];return r.deleteTime=0,r.status=de.NORMAL,this.syncStoreData()}throw new Error("未找到指定ID的密码")}},{key:"unlock",value:function(e){if(console.log("passwordManager 准备解锁密码本"),this.serviceStatusAssert(ve.LOGGED),!this.storeData)throw new Error("系统异常");try{if(!ce(e,this.storeData.passwordData))return j.error("解锁失败-密码错误"),!1;var t=le(e,this.storeData.passwordData),r=le(e,this.storeData.labelData);return t&&r?(this.passwordStore.allPasswordArray=ye(JSON.parse(t)),this.passwordStore.labelArray=JSON.parse(r),this.passwordStore.mainPassword=e,this.passwordStore.setServiceStatus(ve.UNLOCKED),console.log("密码本已解锁"),this.loginStore.setAutoLoginInfo(e),!0):(j.error("解锁失败-密码错误"),!1)}catch(n){return console.log("密码本解锁失败"),console.error(n),!1}}},{key:"lock",value:function(){console.log("passwordManager 锁定密码"),this.passwordStore.mainPassword="",this.passwordStore.allPasswordArray=[],this.passwordStore.labelArray=[],this.passwordStore.setServiceStatus(ve.LOGGED),localStorage.removeItem("mainPassword")}},{key:"emptyRecycle",value:function(){return console.log("passwordManager 清空回收站"),this.passwordStore.allPasswordArray=this.passwordStore.allPasswordArray.filter((function(e){return e.status!==de.DELETED})),this.syncStoreData()}},{key:"syncSetting",value:function(){if([ve.NO_LOGIN].includes(this.passwordStore.serviceStatus))throw new Error("当前状态不允许该操作："+this.passwordStore.serviceStatus);if(!this.databaseClient)throw new Error("系统异常databaseClient isnull syncLabelData");return this.databaseClient.setSettingData(JSON.stringify(this.settingStore.setting))}},{key:"syncStoreData",value:function(){if(this.serviceStatusAssert(ve.UNLOCKED),this.storeData={passwordData:ue(this.passwordStore.mainPassword,JSON.stringify(we(this.passwordStore.allPasswordArray))),labelData:ue(this.passwordStore.mainPassword,JSON.stringify(this.passwordStore.labelArray)),mainPasswordType:this.passwordStore.mainPasswordType},!this.databaseClient)throw new Error("系统异常databaseClient isnull syncLabelData");return this.databaseClient.setStoreData(JSON.stringify(this.storeData))}},{key:"getStoreData",value:function(){if(this.storeData)return this.storeData;throw new Error("文件不存在")}},{key:"closeAccount",value:(e=i(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("passwordManager 注销账号"),e.abrupt("return",new Promise(function(){var e=i(a().mark((function e(r){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serviceStatusAssert(ve.UNLOCKED),t.databaseClient){e.next=3;break}throw new Error("系统异常databaseClient isnull closeAccount");case 3:return e.next=5,t.databaseClient.deleteStoreData().catch((function(e){return e}));case 5:return n=e.sent,e.next=8,t.databaseClient.deleteSettingData().catch((function(e){return e}));case 8:r(n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})}]);var e,t,r,n}(),Oe=e("u",Z("passwordStore",{state:function(){return{passwordManager:new Le,allPasswordArray:[],labelArray:[],mainPassword:"",serviceStatus:ve.NO_LOGIN,topicMode:he.AUTO,mainPasswordType:me.GESTURE,timeoutLock:null,globalLoading:{vis:!1,timeout:null,content:""},filterCondition:{searchText:"",labelArray:[],favoriteId:0}}},getters:{passwordArray:function(){console.log("获取排序后的密码列表");var e=Se(),t=this.allPasswordArray.filter((function(e){return e.status===de.NORMAL})).sort((function(t,r){var n=t[e.setting.sortField],o=r[e.setting.sortField];return"strength"===e.setting.sortField&&(n=Re(t.password),o=Re(r.password)),n>o?e.setting.sortOrder===pe.ASC?1:-1:n<o?e.setting.sortOrder===pe.ASC?-1:1:0}));return console.log("排序后的密码列表数量：",t.length),t},deletedArray:function(){console.log("获取已删除的密码列表");var e=this.allPasswordArray.filter((function(e){return e.status===de.DELETED})).sort((function(e,t){return e.deleteTime>t.deleteTime?1:e.deleteTime<t.deleteTime?-1:0}));return console.log("已删除的密码列表数量：",e.length),e},favoritePasswordArray:function(){console.log("获取收藏的密码列表");var e=this.passwordArray.filter((function(e){return e.favorite})).sort((function(e,t){return e.favoriteTime>t.favoriteTime?1:e.favoriteTime<t.favoriteTime?-1:0}));return console.log("收藏的密码列表数量：",e.length),e},visPasswordArray:function(){var e=this;console.log("获取显示的密码列表");var t=this.passwordArray.filter((function(t){if(e.filterCondition.favoriteId)return t.id===e.filterCondition.favoriteId;var n=!0,o=!0;if(e.filterCondition.searchText){n=!1;var a,s=d([t.title,t.address,t.username,t.password,t.remark].concat(r(Object.entries(t.customFields).flat())).filter(Boolean));try{for(s.s();!(a=s.n()).done;){var i=a.value;if(Fe(e.filterCondition.searchText.trim(),i)){n=!0;break}}}catch(p){s.e(p)}finally{s.f()}}if(e.filterCondition.labelArray.length){o=!1;var u,c=new Set(t.labels),l=d(e.filterCondition.labelArray);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(c.has(f)){o=!0;break}}}catch(p){l.e(p)}finally{l.f()}}return n&&o}));return console.log("显示的密码列表数量：",t.length),t},isDark:function(){return this.topicMode===he.DARK}},actions:{setServiceStatus:function(e){console.log("服务状态变更为：",e),this.serviceStatus=e},logout:function(){console.log("退出登录"),sessionStorage.removeItem("loginForm"),localStorage.removeItem("loginInfo"),localStorage.removeItem("mainPassword"),localStorage.removeItem("topicMode"),this.passwordManager=new Le,this.allPasswordArray=[],this.labelArray=[],this.mainPassword="",this.serviceStatus=ve.NO_LOGIN,Oe().$resetFields(),Ae().$resetFields(),Se().$resetFields(),location.href=Ke()+"#/login"},setTopicMode:function(e){if(console.log("设置主题:",e),localStorage.setItem("topicMode",e),e===he.AUTO){var t,r,n=window.matchMedia("(prefers-color-scheme: dark)");Q().value=n.matches,this.topicMode=n.matches?he.DARK:he.LIGHT,null===(t=window.electronAPI)||void 0===t||t.setTopic("system"),null===(r=window.androidAPI)||void 0===r||r.setTopic("system")}else if(e===he.DARK){var o,a;Q().value=!0,this.topicMode=he.DARK,null===(o=window.electronAPI)||void 0===o||o.setTopic(this.topicMode),null===(a=window.androidAPI)||void 0===a||a.setTopic(this.topicMode)}else if(e===he.LIGHT){var s,i;Q().value=!1,this.topicMode=he.LIGHT,null===(s=window.electronAPI)||void 0===s||s.setTopic(this.topicMode),null===(i=window.androidAPI)||void 0===i||i.setTopic(this.topicMode)}},loading:function(e){var t=this;console.log("触发全局加载"),this.globalLoading.timeout=setTimeout((function(){t.globalLoading.timeout=null,t.globalLoading.vis=!0,t.globalLoading.content=e||"请稍等"}),300)},unloading:function(){console.log("取消全局加载"),this.globalLoading.timeout&&(clearTimeout(this.globalLoading.timeout),this.globalLoading.timeout=null),this.globalLoading.vis=!1},resetTimeoutLock:function(){var e=this;this.timeoutLock&&(clearTimeout(this.timeoutLock),this.timeoutLock=null);var t=Se();0!==t.setting.timeoutLock&&(this.timeoutLock=setTimeout((function(){if(t.setting.timeoutLock&&e.serviceStatus===ve.UNLOCKED&&!t.setting.autoUnlock){var r,n;console.log("超时自动锁定"),e.passwordManager.lock();var o=xe();null===(r=o.settingRef)||void 0===r||r.closeSetting(),null===(n=o.passwordFormRef)||void 0===n||n.closePasswordForm()}}),1e3*t.setting.timeoutLock))}}})),Ne=(e("E",(function(e){return e&&/^.*:\/\/.*$/.test(e)})),s("")),Ce=e("d",(function(){var e=window.innerWidth;return Ne.value=e<768?"xs":e>=768&&e<992?"sm":e>=992&&e<1200?"md":e>=1200&&e<1920?"lg":"xl",Ne}));function Me(e){return Ie.apply(this,arguments)}function Ie(){return Ie=i(a().mark((function e(t){var r,n,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>1&&void 0!==o[1]&&o[1],(n=document.createElement("textarea")).setAttribute("readonly","readonly"),n.value=t,document.body.appendChild(n),n.setSelectionRange(0,n.value.length),n.select(),document.execCommand("copy"),document.body.removeChild(n),r||j.success("复制成功"),console.log("复制到剪切板成功");case 11:case"end":return e.stop()}}),e)}))),Ie.apply(this,arguments)}window.onresize=function(){Ce()};var Fe=function(e,t){return!(!t||!t.toString().includes(e))},Re=e("F",(function(e){if(!e)return 0;var t=0;return/[0-9]/.test(e)&&t++,/[a-z]/.test(e)&&t++,/[A-Z]/.test(e)&&t++,/[^0-9a-zA-Z_]/.test(e)&&t++,e.length<6&&t>2&&(t=2),t>3?3:t})),je={uppercase:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",lowercase:"abcdefghijklmnopqrstuvwxyz",number:"0123456789",symbol:"~!@#$%^&*()_-+=.,;"};function _e(e){var t=[e.uppercase?je.uppercase:"",e.lowercase?je.lowercase:"",e.number?je.number:"",e.symbol?je.symbol:""].filter(Boolean),r=Se();if(r.setting.easyConfuseChat)for(var n=r.setting.easyConfuseChat.split(""),o=0;o<t.length;o++)for(var a=0;a<n.length;a++)t[o]=t[o].replace(n[a],"");if(!(t=t.filter(Boolean)).length)return F.error({title:"生成失败",message:"请检查易混淆字符配置"}),"";for(var s="",i=0;i<e.length;i++){var u=t[i%t.length];s+=u[Math.floor(Math.random()*u.length)]}return s.split("").sort((function(){return Math.random()-.5})).join("")}e("g",(function(e,t){if(!e.labels)return[];var r=[];return function t(r,n){for(var o=0;o<r.length;o++)e.labels.includes(r[o].id)&&n.push(r[o]),r[o].children.length&&t(r[o].children,n)}(t||Oe().labelArray,r),r})),e("D",(function(e){var t=e.title+"\r\n";if(e.address&&(t+="地址: "+e.address+"\r\n"),e.username&&(t+="用户名: "+e.username+"\r\n"),e.password&&(t+="密码: "+e.password+"\r\n"),e.customFields)for(var r in e.customFields)t+=r+": "+e.customFields[r]+"\r\n";e.remark&&(t+=e.remark+"\r\n"),Me(t=t.substring(0,t.length-2),!0),j.success("已复制到剪切板")})),e("C",(function(e){return["","#F56C6C","#FF9700","#67C23A"][Re(e)]})),e("B",(function(e){return["","弱密码","中等强度密码","强密码"][Re(e)]}));var Be=e("f",(function(e,t){var r=new Date(e),n=function(e){return e<10?"0"+e:e},o=r.getFullYear(),a=n(r.getMonth()+1),s=n(r.getDate()),i=n(r.getHours()),u=n(r.getMinutes()),c=n(r.getSeconds());return t.replace("YYYY",o.toString()).replace("MM",a.toString()).replace("DD",s.toString()).replace("HH",i.toString()).replace("mm",u.toString()).replace("ss",c.toString())})),Ge=(e("c",(function(e,t){var r=t.split(/[^A-Za-z]/),n=e.split(/[^0-9]/),o={};r.forEach((function(e,t){o[e]=parseInt(n[t],10)}));var a=o.YYYY||1970,s=(o.MM||1)-1,i=o.DD||1,u=o.HH||0,c=o.mm||0,l=o.ss||0;return new Date(a,s,i,u,c,l)})),e("x",(function(e,t){var r=Date.now();t.forEach((function(t){var n=e.findIndex((function(e){return e.id===t.id}));if(-1!==n){var o=e[n];if(Ue(t,o)){if(t.labels&&t.labels.length>0){var a=new Set(o.labels);o.labels=t.labels.filter((function(e){return!a.has(e)}))}}else t.remark+="（合并恢复 "+Be(Date.now(),"YYYY-MM-DD HH:mm")+"）",t.id=r++,e.push(t)}else e.push(t)}))})),e("y",(function(e,t){var r,n=Date.now(),o=function e(t,r){var n,o=d(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id===r)return!0;if(a.children&&a.children.length>0)return e(a.children,r)}}catch(s){o.e(s)}finally{o.f()}return!1},a=function t(r,a){var s=function(e,t){var r,n=d(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.id===t.id&&o.name===t.name&&o.pid===t.pid)return o}}catch(a){n.e(a)}finally{n.f()}}(r,a);if(s){var i,u=d(a.children);try{for(u.s();!(i=u.n()).done;){var c=i.value;t(s.children,c)}}catch(l){u.e(l)}finally{u.f()}}else o(e,a.id)&&(a.id=n++),r.push(a)},s=d(t);try{for(s.s();!(r=s.n()).done;){var i=r.value;a(e,i)}}catch(u){s.e(u)}finally{s.f()}})),e("s",(function(){var e=0;return function t(r){r.forEach((function(r){e++,r.children&&r.children.length>0&&t(r.children)}))}(Oe().labelArray),e})),e("j",(function(e){var t="";return function r(n,o){n.forEach((function(n){e.includes(n.id)&&(t&&(t+="、"),t+=o+"->"+n.name),n.children&&n.children.length>0&&r(n.children,n.name)}))}(Oe().labelArray,""),t})),e("p",(function(e){var t=e.split("、"),r=[];return t.forEach((function(e){var t=e.split("->").map((function(e){return e.trim()})),n=void 0;t.forEach((function(e,t){var o,a,s;0===t?!(o=r.find((function(t){return t.name===e&&0===t.pid})))&&e&&(o={id:ze(),name:e,pid:0,children:[]},r.push(o)):(o=null===(a=n)||void 0===a?void 0:a.children.find((function(t){return t.name===e})))||(o={id:ze(),name:e,pid:n?n.id:0,children:[]},null===(s=n)||void 0===s||s.children.push(o));n=o}))})),r})),function(e){return e.title+e.username+e.address+e.password+e.remark}),Ue=e("h",(function(e,t){return Ge(e)===Ge(t)})),Ke=function(){var e=location.origin;return e.startsWith("file://")&&(e+=location.pathname),e},Je=(e("z",(function(e,t){if(!e)return"";var r=e.replace("rgb","rgba");return r=r.replace(")",","+t+")")})),Date.now()),ze=e("i",(function(){return Je++})),Ye=e("m",(function(e){return Ke()+"/#/login?type="+e.loginType+"&autoLogin="+ue("password-xl",JSON.stringify(e))})),Ve=function(e){return S("data-v-a27813a2"),e=e(),x(),e}((function(){return y("span",{class:"iconfont icon-verify"},null,-1)})),We={style:{"margin-top":"5px"}},He={style:{"margin-top":"10px"}},Xe={style:{"margin-top":"5px"}},Ze=p({__name:"FastLogin",setup:function(e,t){var r=t.expose,n=q(),o=s(""),a=s(!1),i=function(){a.value=!1,n.push("/")};return r({fastLoginTip:function(e){console.log("快速登录提示"),-1!==location.href.indexOf("autoLogin")||window.electronAPI||window.androidAPI?n.push("/"):(o.value=Ye(e),a.value=!0)},getFastLoginForm:function(e){return JSON.parse(le("password-xl",e))}}),function(e,t){var r=_,n=B,s=G,u=U;return h(),g(u,{fullscreen:["xs","sm"].includes(b(Ce)().value),"append-to-body":!0,width:"700px",modelValue:b(a),"onUpdate:modelValue":t[0]||(t[0]=function(e){return k(a)?a.value=e:null})},{header:v((function(){return[m(r,{size:"large",style:{"user-select":"none"}},{default:v((function(){return[Ve,w(" 登录成功 ")]})),_:1})]})),footer:v((function(){return[m(s,{type:"primary",onClick:i},{default:v((function(){return[w("好的")]})),_:1})]})),default:v((function(){return[y("div",null,[m(r,{type:"info"},{default:v((function(){return[w("以下链接可以自动输入登录信息，您可以保存此链接以防丢失：")]})),_:1})]),y("div",We,[m(n,{type:"textarea",rows:7,"model-value":b(o)},null,8,["model-value"])]),y("div",He,[m(r,{type:"info"},{default:v((function(){return[w("该链接为password-XL首页地址，您可以收藏：")]})),_:1})]),y("div",Xe,[m(n,{readonly:"","model-value":b(Ke)()},null,8,["model-value"])])]})),_:1},8,["fullscreen","modelValue"])}}}),$e=e("_",(function(e,r){var n,o=e.__vccOpts||e,a=d(r);try{for(a.s();!(n=a.n()).done;){var s=t(n.value,2),i=s[0],u=s[1];o[i]=u}}catch(c){a.e(c)}finally{a.f()}return o})),Qe=$e(Ze,[["__scopeId","data-v-a27813a2"]]),qe=e("r",p({__name:"GesturePassword",props:{ciphertext:{type:String},showGesture:{type:Boolean,default:!0}},emits:["complete","pass","fail"],setup:function(e,t){var n=t.emit,o=Oe(),a=n,i=e,u=D([]),l=D([]),f=s(),p=s(),d=void 0,g=s(!1),v=s(""),m=s(null),w=3,b=.33,k="#cacaca",S=.25,x="#409EFF",T="#F56C6C",A=12,L="rgba(64,158,255,0.32)",O="rgba(245,108,108,0.32)",N=function(e){F()},C=function(e){F()},M=function(){var e=l.map((function(e){return e.id})).join();I(e),F()},I=function(e){if(!i.ciphertext)return l.length=0,e.length<5?(console.log("设置密码，手势主密码 请至少连接3个点"),void j.warning("请至少连接3个点")):void a("complete",fe(e));v.value=o.passwordManager.verifyPassword(e,i.ciphertext)?"pass":"fail",F(),v.value?a("pass",fe(e)):a("fail",fe(e)),setTimeout((function(){v.value="",l.length=0,F()}),500)},F=function(){f.value&&p.value&&(_(),B(),z(),i.showGesture&&(U(),G(),R()))},R=function(){if(d){var e=r(l);if(m.value&&g.value&&!v.value&&e.push(m.value),!(e.length<2))for(var t=1;t<e.length;t++){var n=e[t-1],o=e[t];d.beginPath(),d.strokeStyle="fail"===v.value?O:L,d.lineWidth=A,d.moveTo(n.x,n.y),d.lineTo(o.x,o.y),d.stroke()}}},_=function(){if(g.value&&"fail"!==v.value){var e=K();if(e)l.find((function(t){return t.id===e.id}))||l.push(e)}},B=function(){d&&p.value&&d.clearRect(0,0,p.value.width,p.value.height)},G=function(){if(f.value&&p.value&&d)for(var e=0;e<l.length;e++){var t=l[e];J(t)}},U=function(){if(f.value&&p.value&&d&&!v.value&&m.value){var e=K();e&&J(e)}},K=function(){if(!(f.value&&p.value&&d&&m.value))return null;for(var e=0;e<u.length;e++){var t,r=u[e];if(n=r.x,o=r.y,a=r.radius,s=m.value.x,i=null===(t=m.value)||void 0===t?void 0:t.y,Math.sqrt((s-n)*(s-n)+(i-o)*(i-o))<=a)return r}var n,o,a,s,i;return null},J=function(e){d&&(d.beginPath(),d.fillStyle=v.value?T:x,d.arc(e.x,e.y,e.radius*S,0,2*Math.PI),d.fill(),d.beginPath(),d.fillStyle=v.value?O:L,d.arc(e.x,e.y,e.radius*S*2,0,2*Math.PI),d.fill(),d.beginPath(),d.strokeStyle=v.value?T:x,d.lineWidth=2,d.arc(e.x,e.y,e.radius,0,2*Math.PI),d.stroke())},z=function(){d&&u.forEach((function(e){d&&(d.beginPath(),d.strokeStyle=k,d.lineWidth=2,d.arc(e.x,e.y,e.radius,0,2*Math.PI),d.stroke(),d.beginPath(),d.fillStyle=k,d.arc(e.x,e.y,e.radius*S,0,2*Math.PI),d.fill())}))},Y=function(e){g.value=!0;var t={x:e.offsetX,y:e.offsetY};m.value=t,N()},V=function(e){var t={x:e.offsetX,y:e.offsetY};m.value=t,C()},W=function(){g.value&&(g.value=!1,m.value=null,M())},H=function(){g.value&&(g.value=!1,m.value=null,M())},X=function(e){if(p.value){g.value=!0;var t=p.value.getBoundingClientRect(),r={x:e.touches[0].clientX-t.x,y:e.touches[0].clientY-t.y};m.value=r,N()}},Z=function(e){if(p.value){var t=p.value.getBoundingClientRect(),r={x:e.touches[0].clientX-t.x,y:e.touches[0].clientY-t.y};m.value=r,C()}},$=function(){g.value&&(g.value=!1,m.value=null,M())};var Q=function(){if(f.value&&p.value){var e=f.value.clientWidth;console.log("画板大小：",e),p.value.width=e,p.value.height=e,d=function(e,t,r){var n=window.devicePixelRatio||1;e.width=t*n,e.height=r*n,e.style.width="".concat(t,"px"),e.style.height="".concat(r,"px");var o=e.getContext("2d");return o.scale(n,n),o}(p.value,e,e);var t=0;u.length=0;for(var r=0;r<w;r++)for(var n=0;n<w;n++){var o=e/w,a={id:t++,x:r*e/w+o/2,y:n*e/w+e/w/2,radius:o*b};u.push(a)}F()}},q=null;return window.onresize=function(){q&&clearTimeout(q),q=setTimeout(Q,100)},P((function(){c((function(){Q()}))})),function(e,t){return h(),E("div",{ref_key:"gestureDivRef",ref:f,style:{width:"100%",height:"100%"}},[y("canvas",{ref_key:"canvasRef",ref:p,style:{"image-rendering":"auto"},onMousedown:Y,onMousemove:V,onMouseup:W,onMouseleave:H,onTouchstart:X,onTouchmove:Z,onTouchend:$},null,544)],512)}}})),et=function(e){return S("data-v-5267c5a6"),e=e(),x(),e},tt=et((function(){return y("span",{class:"iconfont icon-verify"},null,-1)})),rt=et((function(){return y("span",{style:{"font-weight":"bold"}}," · ",-1)})),nt={key:0,style:{margin:"20px"}},ot={key:1,style:{margin:"20px"}},at={style:{display:"flex","justify-content":"space-between"}},st=p({__name:"VerifyMainPassword",setup:function(e,t){var r=t.expose,n=q(),o=Oe(),u=Se(),c=s(),l=s(),f=s(!1),p=s(null),d=s(""),S=s(JSON.parse(JSON.stringify(o.mainPasswordType))),x=s(),P=D({mainPassword:""}),N=D({mainPassword:[{required:!0,message:"请输入主密码",trigger:"change"}]}),C=function(e){console.log("标准密码输入确认"),e.validate((function(e){if(!e)return c.value.focus(),void console.log("主密码必填校验未通过");"getAndVerify"===d.value?I():"verifyAndUnlock"===d.value&&F()}))},M=function(e){console.log("手势密码绘制完成"),P.mainPassword=e,"getAndVerify"===d.value?I():"verifyAndUnlock"===d.value&&F()},I=function(){if(console.log("获取并验证主密码回调 验证方法是否存在：",!!x.value),!x.value)return f.value=!1,void(p.value&&p.value(P.mainPassword));try{if(!x.value(P.mainPassword))return console.log("验证失败"),void j.error("验证失败")}catch(e){return console.error("验证失败",e),void j.error("验证失败")}f.value=!1,p.value&&p.value(P.mainPassword)},F=function(){return console.log("验证并解锁回调方法"),o.passwordManager.verifyPassword(P.mainPassword)&&o.passwordManager.unlock(P.mainPassword)?(f.value=!1,void(p.value&&p.value(P.mainPassword))):(console.log("验证失败"),void j.error("验证失败"))},R=function(){console.log("跳转登录页"),f.value=!1,n.push("/login")},Y=function(){var e;S.value===me.STANDARD&&(null===(e=c.value)||void 0===e||e.focus())},V=function(){if(o.serviceStatus===ve.NO_LOGIN&&"false"===localStorage.getItem("showGesture"))return!1;return u.setting.verifyShowGesture};return r({getAndVerify:function(e,t){var r;(console.log("获取并验证主密码 passwordType:",t),S.value=t||o.mainPasswordType,d.value="getAndVerify",x.value=e,t===me.STANDARD)&&(null===(r=l.value)||void 0===r||r.resetFields());return P.mainPassword="",f.value=!0,new Promise((function(e){return p.value=e}))},verifyAndUnlock:function(){var e;(console.log("验证密码并解锁"),S.value=o.mainPasswordType,d.value="verifyAndUnlock",o.mainPasswordType===me.STANDARD)&&(null===(e=l.value)||void 0===e||e.resetFields());return P.mainPassword="",f.value=!0,new Promise(function(){var e=i(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p.value=t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),function(e,t){var r=_,n=B,a=K,s=J,i=qe,u=z,p=G,d=U;return h(),g(d,{top:"20vh",width:["xs","sm"].includes(b(Ce)().value)?"95%":"400px",modelValue:b(f),"onUpdate:modelValue":t[4]||(t[4]=function(e){return k(f)?f.value=e:null}),"close-on-click-modal":b(o).serviceStatus!==b(ve).NO_LOGIN,"close-on-press-escape":b(o).serviceStatus!==b(ve).NO_LOGIN,"show-close":b(o).serviceStatus!==b(ve).NO_LOGIN,onOpened:Y,onOpen:t[5]||(t[5]=function(e){var t;return null===(t=b(l))||void 0===t?void 0:t.resetFields()})},{header:v((function(){return[m(r,{size:"large",style:{"user-select":"none"}},{default:v((function(){return[tt,b(o).serviceStatus===b(ve).NO_LOGIN?(h(),E(T,{key:0},[w("自动登录"),rt],64)):A("",!0),w("验证主密码 ")]})),_:1})]})),footer:v((function(){return[y("div",at,[y("div",null,[b(o).serviceStatus===b(ve).NO_LOGIN?(h(),g(u,{key:0,type:"primary",onClick:R,underline:!1},{default:v((function(){return[w("返回登录页")]})),_:1})):A("",!0)]),b(S)===b(me).STANDARD?(h(),g(p,{key:0,onClick:t[3]||(t[3]=function(e){return C(b(l))}),type:"primary"},{default:v((function(){return[w("确定")]})),_:1})):A("",!0)])]})),default:v((function(){return[b(S)===b(me).STANDARD?(h(),E("div",nt,[m(s,{ref_key:"formRef",ref:l,onSubmit:t[2]||(t[2]=L((function(){}),["prevent"])),model:b(P),rules:b(N)},{default:v((function(){return[m(a,{prop:"mainPassword"},{default:v((function(){return[m(n,{ref_key:"passwordInputRef",ref:c,type:"password","show-password":"",autocomplete:"new-password",onKeyup:t[0]||(t[0]=O((function(e){return C(b(l))}),["enter","native"])),modelValue:b(P).mainPassword,"onUpdate:modelValue":t[1]||(t[1]=function(e){return b(P).mainPassword=e}),placeholder:"请输入主密码"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"])])):A("",!0),b(S)===b(me).GESTURE?(h(),E("div",ot,[m(i,{onComplete:M,"show-gesture":V()},null,8,["show-gesture"])])):A("",!0)]})),_:1},8,["width","modelValue","close-on-click-modal","close-on-press-escape","show-close"])}}}),it=$e(st,[["__scopeId","data-v-5267c5a6"]]),ut={key:0,alt:"",class:"back-img hidden-xs-only",src:"data:image/svg+xml,%3csvg%20version='1.1'%20baseProfile='full'%20width='100%25'%20height='100%25'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%201400%20800'%20%3e%3crect%20x='1300'%20y='400'%20rx='40'%20ry='40'%20width='300'%20height='300'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%201450%20550'%20to='360%201450%20550'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3cpath%20d='M%20100%20350%20A%20150%20150%200%201%201%20400%20350%20Q400%20370%20380%20370%20L%20250%20370%20L%20120%20370%20Q100%20370%20100%20350'%20stroke='rgb(253,%20214,%2099)'%20fill='rgb(253,%20214,%2099)'%3e%3canimateMotion%20path='M%20800%20-200%20L%20800%20-300%20L%20800%20-200'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20210%20530%20;%20-30%20210%20530%20;%200%20210%20530'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3ccircle%20cx='200'%20cy='150'%20r='20'%20stroke='%231a73e8'%20fill='%231a73e8'%3e%3canimateMotion%20path='M%200%200%20L%2040%2020%20Z'%20dur='5s'%20repeatCount='indefinite'%20/%3e%3c/circle%3e%3c!--%20三角形%20--%3e%3cpath%20d='M%20165%20580%20L%20270%20580%20Q275%20578%20270%20570%20L%20223%20483%20Q220%20480%20217%20483%20L%20165%20570%20Q160%20578%20165%20580'%20stroke='rgb(238,%20103,%2092)'%20fill='rgb(238,%20103,%2092)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%20210%20530'%20to='360%20210%20530'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3ccircle%20cx='1200'%20cy='600'%20r='30'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%200%200%20L%20-20%2040%20Z'%20dur='9s'%20repeatCount='indefinite'%20/%3e%3c/circle%3e%3cpath%20d='M%20100%20350%20A%2040%2040%200%201%201%20180%20350%20L%20180%20430%20A%2040%2040%200%201%201%20100%20430%20Z'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%20140%20390%20L%20180%20360%20L%20140%20390'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20140%20390;%20-60%20140%20390;%200%20140%20390'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3crect%20x='900'%20y='600'%20rx='30'%20ry='30'%20width='90'%20height='90'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='50s'%20type='rotate'%20from='0%20900%20550'%20to='360%20900%20550'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3c/svg%3e"},ct={key:1,alt:"",class:"back-img hidden-sm-and-up",src:"data:image/svg+xml,%3csvg%20version='1.1'%20baseProfile='full'%20width='100%25'%20height='100%25'%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20800%201400'%20%3e%3c!--%20绿色大方块--%3e%3crect%20x='700'%20y='1000'%20rx='40'%20ry='40'%20width='300'%20height='300'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%20style='transform-box:fill-box;%20transform-origin:center;'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='0%200%200'%20to='360%200%200'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3c!--%20白色椭圆--%3e%3cpath%20d='M%20100%20350%20A%2040%2040%200%201%201%20180%20350%20L%20180%20430%20A%2040%2040%200%201%201%20100%20430%20Z'%20stroke='rgb(241,%20243,%20244)'%20fill='rgb(241,%20243,%20244)'%3e%3canimateMotion%20path='M%20240%20590%20L%20180%20360%20L%20240%20590'%20dur='20s'%20begin='0s'%20repeatCount='indefinite'%20/%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20values='0%20140%20390;%20-60%20140%20390;%200%20140%20390'%20keyTimes='0%20;%200.5%20;%201'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c!--%20绿色小方块--%3e%3crect%20x='400'%20y='600'%20rx='40'%20ry='40'%20width='100'%20height='100'%20stroke='rgb(129,%20201,%20149)'%20fill='rgb(129,%20201,%20149)'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='35s'%20type='rotate'%20from='-30%20550%20750'%20to='330%20550%20750'%20repeatCount='indefinite'%20/%3e%3c/rect%3e%3csvg%20viewBox='0%200%201024%201024'%20version='1.1'%20x='100'%20y='1100'%20xmlns='http://www.w3.org/2000/svg'%20width='200px'%20height='200px'%3e%3cpath%20d='M225.28%20163.84h573.44c45.056%200%2081.92%2036.864%2081.92%2081.92v450.56c0%2045.056-36.864%2081.92-81.92%2081.92H225.28c-45.056%200-81.92-36.864-81.92-81.92V245.76c0-45.056%2036.864-81.92%2081.92-81.92z%20m430.08%20450.56c79.872%200%20143.36-63.488%20143.36-143.36s-63.488-143.36-143.36-143.36-143.36%2063.488-143.36%20143.36%2063.488%20143.36%20143.36%20143.36z%20m0-81.92c34.816%200%2061.44-26.624%2061.44-61.44s-26.624-61.44-61.44-61.44-61.44%2026.624-61.44%2061.44%2026.624%2061.44%2061.44%2061.44z'%20fill='%230af1f4'%20style='transform-box:fill-box;%20transform-origin:center;'%3e%3canimateTransform%20attributeType='XML'%20attributeName='transform'%20begin='0s'%20dur='30s'%20type='rotate'%20from='0%200%200'%20to='360%200%200'%20repeatCount='indefinite'%20/%3e%3c/path%3e%3c/svg%3e%3c/svg%3e"},lt=["element-loading-text"],ft=p({__name:"App",setup:function(e){var t=xe(),r=Se(),n=Oe(),o=localStorage.getItem("topicMode")||"auto";n.setTopicMode(o),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",(function(){var e=localStorage.getItem("topicMode")||"auto";console.log("系统主题变动，设置主题为：",e),n.setTopicMode(e)}));var a,i=s(!1);return(a=localStorage.getItem("dynamicBackground"))&&"true"!==a||(i.value=!0),N((function(){return r.setting.dynamicBackground}),(function(e){localStorage.setItem("dynamicBackground",e.toString()),i.value=r.setting.dynamicBackground})),function(e,r){var o=M("router-view"),a=it,s=Qe,u=Y,c=V;return h(),E(T,null,[b(i)?(h(),E("img",ut)):A("",!0),b(i)?(h(),E("img",ct)):A("",!0),C((h(),E("div",{onClick:r[0]||(r[0]=function(e){return b(n).resetTimeoutLock()}),id:"password-app","element-loading-text":b(n).globalLoading.content},[m(u,{locale:b(W)},{default:v((function(){return[m(o),m(a,{ref:function(e){return b(t).verifyPasswordRef=e}},null,512),m(s,{ref:function(e){return b(t).fastLoginRef=e}},null,512)]})),_:1},8,["locale"])],8,lt)),[[c,b(n).globalLoading.vis]])],64)}}}),pt=function(e,t,r){var n=Promise.resolve();return n.then((function(){return e()})).catch((function(e){var t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},dt=[{path:"/",name:"Index",component:function(){return pt((function(){return n.import("./IndexPage-legacy-22N5wDGj.js")}),0,n.meta.url)}},{path:"/login",name:"Login",component:function(){return pt((function(){return n.import("./LoginPage-legacy-BxY2dNuM.js")}),0,n.meta.url)}}],ht=[ve.LOGGED,ve.WAIT_INIT,ve.UNLOCKED],gt=ee({history:te(),routes:dt});gt.beforeEach((function(e,t,r){if(console.log("路由变化：",t.path,e.path),"/login"!==e.path&&"/test"!==e.path){var n=Oe(),o=Se();if(ht.includes(n.serviceStatus))r();else if(o.setting.autoLogin&&!e.path.startsWith("/login"))try{console.log("router 尝试自动登录"),Ae().autoLogin().then((function(e){console.log("router 自动登录结果:",e),e?r():(console.log("autoLoginFail"),r("/login"))}))}catch(a){console.error("router 自动登录异常",a),r("/login")}else r("/login")}else r()}));var vt=ne();vt.use((function(e){var t=e.options,r=e.store;r.$resetFields=function(e){var n=t.state,o=n?n():{};r.$patch((function(t){e&&(o=re(o,e)),Object.assign(t,o)}))}}));var mt=I(ft);mt.use(gt),mt.use(vt),mt.mount("#app")}}}))}();
